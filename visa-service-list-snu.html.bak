<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤ - ë²•ë¬´ë²•ì¸ ë¡œì—° x ì„œìš¸ëŒ€í•™êµ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/ui-components.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1D2088 0%, #151A66 100%);
            padding: 30px 20px;
            color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 15px;
            opacity: 0.9;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: white;
            color: #1D2088;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .info-banner {
            background: linear-gradient(135deg, #e8f4f0 0%, #d1f0e4 100%);
            border: 2px solid #007A33;
            border-radius: 15px;
            padding: 20px 25px;
            margin-bottom: 20px;
        }

        .info-banner h3 {
            color: #1D2088;
            font-size: 18px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-banner p {
            color: #2c3e50;
            font-size: 14px;
            line-height: 1.6;
        }

        .search-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #1D2088;
            box-shadow: 0 0 0 3px rgba(0, 122, 51, 0.1);
        }

        .search-box i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .filter-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-tag {
            padding: 10px 18px;
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.3s ease;
        }

        .filter-tag:hover {
            background: #e5e7eb;
        }

        .filter-tag.active {
            background: #007A33;
            color: white;
            border-color: #1D2088;
        }

        .category-section {
            background: white;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .category-header {
            padding: 20px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .category-header:hover {
            background: #e8f4f0;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .category-icon {
            font-size: 32px;
        }

        .category-info h3 {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .category-info p {
            font-size: 13px;
            color: #6b7280;
        }

        .category-toggle {
            font-size: 20px;
            color: #9ca3af;
            transition: transform 0.3s ease;
        }

        .category-section.expanded .category-toggle {
            transform: rotate(180deg);
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            padding: 0 25px;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .category-section.expanded .service-grid {
            max-height: 5000px;
            padding: 20px 25px;
            margin-bottom: 10px;
            opacity: 1;
        }

        .service-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .service-card:hover {
            border-color: #1D2088;
            background: #e8f4f0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .service-card .title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .service-card .price {
            font-size: 20px;
            font-weight: 700;
            color: #1D2088;
            margin-bottom: 8px;
        }

        .service-card .details {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .service-card .processing-time {
            font-size: 12px;
            color: #9ca3af;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .service-card .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }

        .badge.popular {
            background: #fef3c7;
            color: #92400e;
        }

        .badge.urgent {
            background: #fee2e2;
            color: #991b1b;
        }

        .stats-banner {
            background: linear-gradient(135deg, #e8f4f0 0%, #d1f0e4 100%);
            border: 2px solid #007A33;
            border-radius: 15px;
            padding: 20px 25px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat-item {
            flex: 1;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #1D2088;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: #6b7280;
        }

        @media (max-width: 768px) {
            .service-grid {
                grid-template-columns: 1fr;
            }

            .stats-banner {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <button class="back-btn" onclick="window.location.href='visa-dashboard-jnu.html'">
                <i class="fas fa-arrow-left"></i> ëŒ€ì‹œë³´ë“œë¡œ
            </button>
            <h1><i class="fas fa-file-alt"></i> D-2 ìœ í•™ìƒ ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤</h1>
            <p>ë²•ë¬´ë²•ì¸ ë¡œì—° x ì „ë‚¨ëŒ€í•™êµ - D-2 ìœ í•™ìƒì„ ìœ„í•œ ì‹¤ìš© ì¶œì…êµ­ ëŒ€í–‰ ì„œë¹„ìŠ¤</p>
        </div>
    </div>

    <div class="container">
        <div class="info-banner">
            <h3><i class="fas fa-info-circle"></i> D-2 ìœ í•™ìƒ ë§ì¶¤ ì„œë¹„ìŠ¤</h3>
            <p>ì´ë¯¸ ìœ í•™ë¹„ì(D-2)ë¥¼ ì†Œì§€í•˜ì‹  í•™ìƒë¶„ë“¤ì„ ìœ„í•œ ì‹¤ì œ í•„ìš” ì„œë¹„ìŠ¤ë§Œ ì—„ì„ í–ˆìŠµë‹ˆë‹¤. 
            ì‚¬ì¦ ë°œê¸‰, ê·€í™” ë“± í˜„ì¬ ë¶ˆí•„ìš”í•œ ì„œë¹„ìŠ¤ëŠ” ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div class="stats-banner">
            <div class="stat-item">
                <div class="stat-value">14ê°œ</div>
                <div class="stat-label">D-2 í•„ìˆ˜ ì„œë¹„ìŠ¤</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">ì „ë‚¨ëŒ€í•™êµ</div>
                <div class="stat-label">í˜‘ì•½ ëŒ€í•™</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">ë²•ë¬´ë²•ì¸</div>
                <div class="stat-label">ì „ë¬¸ê°€ ì§ì ‘ ì²˜ë¦¬</div>
            </div>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ì„œë¹„ìŠ¤ëª…ì„ ê²€ìƒ‰í•˜ì„¸ìš” (ì˜ˆ: ì²´ë¥˜ê¸°ê°„ ì—°ì¥, ì¬ì…êµ­í—ˆê°€)">
                <i class="fas fa-search"></i>
            </div>
            <div class="filter-tags">
                <div class="filter-tag active" data-filter="all">ì „ì²´</div>
                <div class="filter-tag" data-filter="popular">ì¸ê¸° ì„œë¹„ìŠ¤</div>
                <div class="filter-tag" data-filter="essential">í•„ìˆ˜ ì„œë¹„ìŠ¤</div>
            </div>
        </div>

        <div id="categoryContainer">
            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
        </div>
    </div>

    <script src="js/ui-components.js"></script>
    <script>
        // ğŸ“ ìœ í•™ìƒ(D-2/D-4) ì „ìš© ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤ (Compact ver.)
        const services = {
            // 1. ìƒí™œ ì‹ ê³  & ë°œê¸‰ (Living & Reporting)
            living: {
                icon: 'ğŸ“',
                title: 'ìƒí™œ ì‹ ê³  & ë°œê¸‰',
                description: 'ì´ì‚¬, ì—¬ê¶Œê°±ì‹  ë“± ì¼ìƒ ìƒí™œ í•„ìˆ˜ ì‹ ê³ ',
                services: [
                    { id: 'address-change', title: 'ì²´ë¥˜ì§€(ì£¼ì†Œ) ë³€ê²½ ì‹ ê³ ', desc: 'ì´ì‚¬ í›„ 14ì¼ ì´ë‚´ ì‹ ê³  (ê¸°ìˆ™ì‚¬/ì›ë£¸ ë“±)', serviceFee: 44000, govFee: 0, total: 44000, time: '3-5ì¼', popular: true, essential: true },
                    { id: 'passport-change', title: 'ì—¬ê¶Œ ì •ë³´ ë³€ê²½ ì‹ ê³ ', desc: 'ì—¬ê¶Œ ì¬ë°œê¸‰/ê°±ì‹  í›„ 15ì¼ ì´ë‚´ ì‹ ê³ ', serviceFee: 22000, govFee: 0, total: 22000, time: '3-5ì¼', popular: true, essential: true },
                    { id: 'cert-issue', title: 'ì‚¬ì‹¤ì¦ëª… ë°œê¸‰ ëŒ€í–‰', desc: 'ì¶œì…êµ­/ì™¸êµ­ì¸ë“±ë¡/ê±°ì†Œì‹ ê³  ì‚¬ì‹¤ì¦ëª…', serviceFee: 22000, govFee: 1000, total: 23000, time: '1-2ì¼', popular: true },
                    { id: 'arc-reissue', title: 'ë“±ë¡ì¦ ì¬ë°œê¸‰ ì‹ ì²­', desc: 'ë¶„ì‹¤, í›¼ì†, ê¸°ì¬ë€ ë¶€ì¡± ì‹œ', serviceFee: 55000, govFee: 30000, total: 85000, time: '5-7ì¼', essential: true }
                ]
            },
            // 2. ë¹„ì ì—°ì¥ & ì‹œê°„ì œ ì·¨ì—… (Extension & Part-time)
            extension: {
                icon: 'ğŸ“‹',
                title: 'ë¹„ì ì—°ì¥ & ì‹œê°„ì œ ì·¨ì—…',
                description: 'ì¬í•™ ì¤‘ ì£¼ê¸°ì ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ” í•„ìˆ˜ ë¯¼ì›',
                services: [
                    { id: 'stay-extension-normal', title: 'ì²´ë¥˜ê¸°ê°„ ì—°ì¥ (ì¼ë°˜)', desc: 'ì„±ì /ì¶œì„ ì •ìƒ í•™ìƒì˜ ê¸°ê°„ ì—°ì¥', serviceFee: 140000, govFee: 60000, total: 200000, time: '7-10ì¼', popular: true, essential: true },
                    { id: 'stay-extension-poor', title: 'ì²´ë¥˜ê¸°ê°„ ì—°ì¥ (ì„±ì ë¯¸ë‹¬)', desc: 'í•™ì  2.0 ë¯¸ë§Œ / ì¶œì„ ë¯¸ë‹¬ì (ì‚¬ìœ ì„œ í¬í•¨)', serviceFee: 220000, govFee: 60000, total: 280000, time: '7-10ì¼', essential: true },
                    { id: 'part-time-normal', title: 'ì‹œê°„ì œì·¨ì—… í—ˆê°€ (ì•Œë°”)', desc: 'ì¼ë°˜ ì•„ë¥´ë°”ì´íŠ¸ ì‚¬ì „ í—ˆê°€ (í‰ì¼/ì£¼ë§)', serviceFee: 55000, govFee: 0, total: 55000, time: '5-7ì¼', popular: true, essential: true },
                    { id: 'part-time-manufacture', title: 'ì œì¡°ì—… ì˜ˆì™¸ í—ˆê°€', desc: 'ë°©í•™ ì¤‘ ì œì¡°ì—… ì•„ë¥´ë°”ì´íŠ¸ (TOPIK 4ê¸‰â†‘)', serviceFee: 110000, govFee: 0, total: 110000, time: '7-10ì¼', essential: true }
                ]
            },
            // 3. ì²´ë¥˜ ìê²© ë³€ê²½ (Change of Status)
            status_change: {
                icon: 'ğŸ”„',
                title: 'ì²´ë¥˜ ìê²© ë³€ê²½',
                description: 'ì§„í•™, ì·¨ì—…, ê°€ì¡± ì´ˆì²­ ë“± ëª©ì ë³„ ë¹„ì ë³€ê²½',
                services: [
                    { id: 'change-d2', title: 'ì§„í•™/í¸ì… ë³€ê²½ (D-2)', desc: 'ì–´í•™ì—°ìˆ˜â†’ëŒ€í•™, í•™ì‚¬â†’ì„ì‚¬, íƒ€ ëŒ€í•™ í¸ì…', serviceFee: 280000, govFee: 100000, total: 380000, time: '10-14ì¼', popular: true },
                    { id: 'change-d10', title: 'êµ¬ì§ ë¹„ì ë³€ê²½ (D-10)', desc: 'ì¡¸ì—… í›„ êµ¬ì§ í™œë™ (ì ìˆ˜ì œ ì„¤ê³„ í¬í•¨)', serviceFee: 220000, govFee: 100000, total: 320000, time: '10-14ì¼', popular: true, essential: true },
                    { id: 'change-e7', title: 'ì·¨ì—… ë¹„ì ë³€ê²½ (E-7)', desc: 'í•œêµ­ ê¸°ì—… ì·¨ì—… í™•ì • ì‹œ (ê³ ìš©ì‚¬ìœ ì„œ ì‘ì„±)', serviceFee: 1650000, govFee: 200000, total: 1850000, time: '14-21ì¼', essential: true },
                    { id: 'change-family', title: 'ê°€ì¡± ì´ˆì²­ ë¹„ì (F-1/F-3)', desc: 'ë¶€ëª¨ë‹˜ ë˜ëŠ” ë°°ìš°ì/ìë…€ ì´ˆì²­ ë³€ê²½', serviceFee: 330000, govFee: 100000, total: 430000, time: '14-21ì¼' }
                ]
            },
            // 4. ìœ„ê¸° ê´€ë¦¬ & êµ¬ì œ (Crisis Management)
            crisis: {
                icon: 'ğŸš¨',
                title: 'ìœ„ê¸° ê´€ë¦¬ & êµ¬ì œ',
                description: 'ë²•ì  ë¬¸ì œ, ì†Œì†¡ ì§€ì› ë“± ê¸´ê¸‰ ìƒí™© ëŒ€ì‘',
                services: [
                    { id: 'investigation-support', title: 'ì¶œì…êµ­ ì‚¬ë²”ì‹¬ì‚¬ ë™í–‰', desc: 'ë¶ˆë²•ì•Œë°” ì ë°œ, í­í–‰, ìŒì£¼ ë“± ì¡°ì‚¬ ì¡°ë ¥', serviceFee: null, govFee: 0, total: null, time: 'ê¸´ê¸‰ ëŒ€ì‘', urgent: true, consultRequired: true },
                    { id: 'deportation-lawsuit', title: 'ì¶œêµ­ëª…ë ¹ ì·¨ì†Œì†Œì†¡', desc: 'ê°•ì œí‡´ê±°Â·ì¶œêµ­ëª…ë ¹ì— ëŒ€í•œ ì·¨ì†Œì†Œì†¡ ëŒ€ë¦¬', serviceFee: null, govFee: 0, total: null, time: '30-60ì¼', urgent: true, consultRequired: true },
                    { id: 'visa-rejection-lawsuit', title: 'ì²´ë¥˜ìê²© ì—°ì¥Â·ë³€ê²½ ë¶ˆí—ˆì²˜ë¶„ ì·¨ì†Œì†Œì†¡', desc: 'ë¹„ì ì—°ì¥/ë³€ê²½ ê±°ë¶€ ì²˜ë¶„ì— ëŒ€í•œ ì†Œì†¡ ëŒ€ë¦¬', serviceFee: null, govFee: 0, total: null, time: '30-60ì¼', urgent: true, consultRequired: true },
                    { id: 'fine-lawsuit', title: 'ë²”ì¹™ê¸ˆë¶€ê³¼ì²˜ë¶„ ì·¨ì†Œì†Œì†¡', desc: 'ë²”ì¹™ê¸ˆ ë¶€ê³¼ ì²˜ë¶„ì— ëŒ€í•œ ì·¨ì†Œì†Œì†¡ ëŒ€ë¦¬', serviceFee: null, govFee: 0, total: null, time: '30-60ì¼', urgent: true, consultRequired: true }
                ]
            }
        };

        // í˜ì´ì§€ ë¡œë“œ
        window.addEventListener('DOMContentLoaded', function() {
            renderCategories();
            setupSearch();
            setupFilters();
            
            // ì²« ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ ìë™ í¼ì¹˜ê¸°
            setTimeout(() => {
                const firstCategory = document.querySelector('.category-section');
                if (firstCategory) {
                    firstCategory.classList.add('expanded');
                }
            }, 100);
        });

        // ì¹´í…Œê³ ë¦¬ ë Œë”ë§
        function renderCategories(filter = 'all') {
            const container = document.getElementById('categoryContainer');
            container.innerHTML = '';

            Object.keys(services).forEach(categoryKey => {
                const category = services[categoryKey];
                
                // í•„í„°ë§ëœ ì„œë¹„ìŠ¤
                let filteredServices = category.services;
                if (filter === 'popular') {
                    filteredServices = category.services.filter(s => s.popular);
                } else if (filter === 'essential') {
                    filteredServices = category.services.filter(s => s.essential);
                }

                if (filteredServices.length === 0) return;

                const section = document.createElement('div');
                section.className = 'category-section';
                section.innerHTML = `
                    <div class="category-header" onclick="toggleCategory(this)">
                        <div class="category-title">
                            <div class="category-icon">${category.icon}</div>
                            <div class="category-info">
                                <h3>${category.title} (${filteredServices.length})</h3>
                                <p>${category.description}</p>
                            </div>
                        </div>
                        <div class="category-toggle"><i class="fas fa-chevron-down"></i></div>
                    </div>
                    <div class="service-grid">
                        ${filteredServices.map(service => `
                            <div class="service-card" onclick="goToConsent('${service.id}', '${service.title}', ${service.total})">
                                <div class="title">${service.title}</div>
                                ${service.consultRequired ? 
                                    '<div class="price" style="color:#1D2088;font-weight:600;">ìƒë‹´ ì‹ ì²­</div>' : 
                                    `<div class="price">${service.total.toLocaleString()}ì› (VATí¬í•¨)</div>`
                                }
                                ${service.desc ? `<div class="details" style="color:#6b7280;font-size:13px;margin:8px 0;line-height:1.4;">${service.desc}</div>` : ''}
                                <div class="processing-time">
                                    <i class="fas fa-clock"></i> ì²˜ë¦¬ê¸°ê°„: ${service.time}
                                </div>
                                ${service.popular ? '<span class="badge popular">ì¸ê¸°</span>' : ''}
                                ${service.urgent ? '<span class="badge urgent">ê¸´ê¸‰</span>' : ''}
                                ${service.essential ? '<span class="badge" style="background:#d1f0e4;color:#1D2088">í•„ìˆ˜</span>' : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(section);
            });
        }

        // ì¹´í…Œê³ ë¦¬ í† ê¸€
        function toggleCategory(header) {
            const section = header.parentElement;
            section.classList.toggle('expanded');
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const keyword = e.target.value.toLowerCase();
                
                document.querySelectorAll('.service-card').forEach(card => {
                    const title = card.querySelector('.title').textContent.toLowerCase();
                    if (title.includes(keyword)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });

                // ê²€ìƒ‰ ì¤‘ì¼ ë•Œ ëª¨ë“  ì¹´í…Œê³ ë¦¬ í¼ì¹˜ê¸°
                if (keyword) {
                    document.querySelectorAll('.category-section').forEach(section => {
                        section.classList.add('expanded');
                    });
                }
            });
        }

        // í•„í„° ê¸°ëŠ¥
        function setupFilters() {
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    renderCategories(filter);
                    
                    // í•„í„° ì ìš© í›„ ì²« ì¹´í…Œê³ ë¦¬ í¼ì¹˜ê¸°
                    setTimeout(() => {
                        const firstCategory = document.querySelector('.category-section');
                        if (firstCategory) {
                            firstCategory.classList.add('expanded');
                        }
                    }, 100);
                });
            });
        }

        // ë™ì˜ í˜ì´ì§€ë¡œ ì´ë™
        function goToConsent(serviceId, serviceName, amount) {
            window.location.href = `visa-consent-jnu.html?service=${serviceId}&name=${encodeURIComponent(serviceName)}&amount=${amount}`;
        }
    </script>
</body>
</html>
