<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì‹œë³´ë“œ - ë²•ë¬´ë²•ì¸ ë¡œì—° x ì„œìš¸ëŒ€í•™êµ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/ui-components.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
        }

        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #1D2088 0%, #151A66 100%);
            padding: 20px;
            color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .user-info p {
            font-size: 14px;
            opacity: 0.9;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .header-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .header-btn:hover {
            background: white;
            color: #1D2088;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ë¡œì—° ê³ ìœ  ì„œë¹„ìŠ¤ ë°°ë„ˆ (ìµœìƒë‹¨) */
        .premium-service-banner {
            background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
            position: relative;
            overflow: hidden;
        }

        .premium-service-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .premium-service-banner h3 {
            font-size: 24px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .premium-service-banner p {
            font-size: 15px;
            opacity: 0.95;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .premium-service-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            position: relative;
            z-index: 1;
        }

        .premium-service-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            color: #2c3e50;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 10px;
            cursor: pointer;
        }

        .premium-service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .premium-service-card .icon {
            font-size: 32px;
            color: #f97316;
        }

        .premium-service-card .title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
        }

        .premium-service-card .desc {
            font-size: 13px;
            color: #6b7280;
            line-height: 1.5;
        }

        .premium-service-card .badge {
            display: inline-block;
            background: #fef3c7;
            color: #92400e;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            align-self: flex-start;
        }

        /* ë‚˜ì˜ ì²´ë¥˜í˜„í™© */
        .stay-status {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .stay-status h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .status-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .status-card.warning {
            border-color: #fbbf24;
            background: #fef3c7;
        }

        .status-card.critical {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .status-card .label {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .status-card .value {
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
        }

        .status-card .sub-value {
            font-size: 14px;
            color: #6b7280;
            margin-top: 5px;
        }

        .future-visa-options {
            background: #e8f8f0;
            border: 2px solid #007A33;
            border-radius: 15px;
            padding: 20px;
        }

        .future-visa-options h4 {
            font-size: 15px;
            color: #1D2088;
            margin-bottom: 12px;
        }

        .visa-option-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .visa-tag {
            background: white;
            border: 2px solid #007A33;
            color: #1D2088;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .visa-tag:hover {
            background: #007A33;
            color: white;
        }

        /* ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤ */
        .services-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .services-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-tab {
            padding: 10px 20px;
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.3s ease;
        }

        .category-tab.active {
            background: #e8f8f0;
            border-color: #1D2088;
            color: #1D2088;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .service-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .service-item:hover {
            border-color: #1D2088;
            background: #e8f8f0;
            transform: translateY(-2px);
        }

        .service-item .title {
            font-size: 15px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .service-item .price {
            font-size: 18px;
            font-weight: 700;
            color: #1D2088;
            margin-bottom: 5px;
        }

        .service-item .desc {
            font-size: 12px;
            color: #6b7280;
        }

        /* ë‚˜ì˜ ì‹ ì²­ ë‚´ì—­ */
        .applications-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .applications-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .application-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .application-card:hover {
            border-color: #1D2088;
            background: #e8f8f0;
        }

        .application-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .application-title {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
        }

        .status-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.processing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-badge.completed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .application-info {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: #6b7280;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 16px;
            margin-bottom: 20px;
        }

        .btn-action {
            background: linear-gradient(135deg, #1D2088 0%, #151A66 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 122, 51, 0.3);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .premium-service-grid,
            .status-grid,
            .service-grid {
                grid-template-columns: 1fr;
            }

            .service-categories {
                overflow-x: auto;
                flex-wrap: nowrap;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="user-info">
                <h2 id="userName">í™˜ì˜í•©ë‹ˆë‹¤!</h2>
                <p>ì „ë‚¨ëŒ€í•™êµ</p>
            </div>
            <div class="header-actions">
                <button class="header-btn" onclick="window.location.href='visa-profile-setup-jnu.html'">
                    <i class="fas fa-user-edit"></i> í”„ë¡œí•„
                </button>
                <button class="header-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- ë¡œì—° ê³ ìœ  ì„œë¹„ìŠ¤ ë°°ë„ˆ -->
        <div class="premium-service-banner">
            <h3><i class="fas fa-star"></i> ë²•ë¬´ë²•ì¸ ë¡œì—° ì „ë¬¸ ì„œë¹„ìŠ¤</h3>
            <p>D-2/D-4 ìœ í•™ìƒì„ ìœ„í•œ ë§ì¶¤í˜• ë¹„ì ì „í™˜ ë° ì·¨ì—… ì§€ì› ì„œë¹„ìŠ¤</p>
            <div class="premium-service-grid">
                <div class="premium-service-card" onclick="goToDiagnosis('D-10')">
                    <div class="icon">ğŸ”</div>
                    <div class="title">D-10 ë¹„ì ì‚¬ì „ì§„ë‹¨</div>
                    <div class="desc">ì¶œì…êµ­ë²• ìœ„ë°˜ì‚¬ì‹¤ í™•ì¸ ë° êµ¬ì§ ë¹„ì ì „í™˜ ê°€ëŠ¥ì„± í‰ê°€</div>
                    <div class="badge" id="d10FreeBadge">26ë…„ 2ì›” ì¡¸ì—…ì ë¬´ë£Œ</div>
                </div>
                <div class="premium-service-card" onclick="goToDiagnosis('E-7')">
                    <div class="icon">ğŸ’¼</div>
                    <div class="title">E-7 ë¹„ì ì‚¬ì „ì§„ë‹¨</div>
                    <div class="desc">ì¶œì…êµ­ë²• ìœ„ë°˜ì‚¬ì‹¤ í™•ì¸ ë° ì·¨ì—… ë¹„ì ìê²© ê²€í† </div>
                    <div class="badge" id="e7FreeBadge">26ë…„ 2ì›” ì¡¸ì—…ì ë¬´ë£Œ</div>
                </div>
            </div>
        </div>

        <!-- ë‚˜ì˜ ì²´ë¥˜í˜„í™© -->
        <div class="stay-status">
            <h3><i class="fas fa-passport"></i> ë‚˜ì˜ ì²´ë¥˜í˜„í™©</h3>
            <div class="status-grid">
                <div class="status-card" id="visaStatusCard">
                    <div class="label">í˜„ì¬ ì²´ë¥˜ìê²©</div>
                    <div class="value" id="currentVisa">-</div>
                </div>
                <div class="status-card" id="expiryStatusCard">
                    <div class="label">ì¡¸ì—… ì˜ˆì •</div>
                    <div class="value" id="graduationDate">-</div>
                </div>
                <div class="status-card">
                    <div class="label">ì™¸êµ­ì¸ë“±ë¡ë²ˆí˜¸</div>
                    <div class="value" id="arcNumber">-</div>
                </div>
            </div>

            <div class="future-visa-options">
                <h4><i class="fas fa-arrow-right"></i> ë³€ê²½ ê°€ëŠ¥í•œ ì²´ë¥˜ìê²©</h4>
                <div class="visa-option-tags" id="futureVisaOptions">
                    <div class="visa-tag">D-10 (êµ¬ì§)</div>
                    <div class="visa-tag">E-7 (íŠ¹ì •í™œë™)</div>
                    <div class="visa-tag">D-8 (ê¸°ì—…íˆ¬ì)</div>
                    <div class="visa-tag">F-2 (ê±°ì£¼)</div>
                </div>
            </div>
        </div>

        <!-- ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤ -->
        <div class="services-section">
            <h3><i class="fas fa-file-alt"></i> ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤</h3>
            
            <div class="service-categories">
                <div class="category-tab active" data-category="living">ìƒí™œ ì‹ ê³  & ë°œê¸‰</div>
                <div class="category-tab" data-category="extension">ë¹„ì ì—°ì¥ & ì‹œê°„ì œ ì·¨ì—…</div>
                <div class="category-tab" data-category="status_change">ì²´ë¥˜ ìê²© ë³€ê²½</div>
                <div class="category-tab" data-category="crisis">ìœ„ê¸° ê´€ë¦¬ & êµ¬ì œ</div>
            </div>

            <div class="service-grid" id="serviceGrid">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
        </div>

        <!-- ë‚˜ì˜ ì‹ ì²­ ë‚´ì—­ -->
        <div class="applications-section">
            <h3><i class="fas fa-history"></i> ë‚˜ì˜ ì‹ ì²­ ë‚´ì—­</h3>
            <div id="applicationsList">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
        </div>
    </div>

    <script src="js/ui-components.js"></script>
    <script>
        let currentUser = null;
        let studentProfile = null;

        window.addEventListener('DOMContentLoaded', function() {
            currentUser = JSON.parse(localStorage.getItem('currentUser'));
            studentProfile = JSON.parse(localStorage.getItem('studentProfile'));

            if (!currentUser || currentUser.userType !== 'student') {
                window.location.href = 'visa-login-snu.html';
                return;
            }

            if (!currentUser.profileCompleted) {
                window.location.href = 'visa-profile-setup-snu.html';
                return;
            }

            loadUserInfo();
            loadStayStatus();
            loadServices();
            loadApplications();
            checkFreePromotion();
        });

        function loadUserInfo() {
            document.getElementById('userName').textContent = studentProfile.full_name + 'ë‹˜';
        }

        function loadStayStatus() {
            document.getElementById('currentVisa').textContent = studentProfile.current_visa;
            document.getElementById('graduationDate').textContent = studentProfile.expected_graduation;
            document.getElementById('arcNumber').textContent = studentProfile.arc_number || 'ë¯¸ë“±ë¡';

            if (studentProfile.current_visa === 'D-2') {
                const futureOptions = ['D-10 (êµ¬ì§)', 'E-7 (íŠ¹ì •í™œë™)', 'D-8 (ê¸°ì—…íˆ¬ì)', 'D-9-5 (ìœ í•™ìƒ ì°½ì—… íŠ¹ë¡€)', 'F-2 (ìš°ìˆ˜ì¸ì¬)'];
                const container = document.getElementById('futureVisaOptions');
                container.innerHTML = '';
                futureOptions.forEach(visa => {
                    const tag = document.createElement('div');
                    tag.className = 'visa-tag';
                    tag.textContent = visa;
                    tag.onclick = () => showToast(`${visa} ì „í™˜ì— ëŒ€í•´ ì „ë¬¸ê°€ ìƒë‹´ì´ í•„ìš”í•˜ì‹œë©´ ì‚¬ì „ì§„ë‹¨ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì„¸ìš”.`, 'info', 4000);
                    container.appendChild(tag);
                });
            }
        }

        function checkFreePromotion() {
            const graduation = studentProfile.expected_graduation;
            if (graduation === '2026-02') {
                document.getElementById('d10FreeBadge').textContent = 'ë¬´ë£Œ í˜œíƒ ëŒ€ìƒ';
                document.getElementById('e7FreeBadge').textContent = 'ë¬´ë£Œ í˜œíƒ ëŒ€ìƒ';
            }
        }

        // ì‚¬ì „ì§„ë‹¨ìœ¼ë¡œ ì´ë™
        function goToDiagnosis(type) {
            window.location.href = `visa-pre-diagnosis-jnu.html?type=${type}`;
        }

        // ì¶œì…êµ­ ë¯¼ì› ì„œë¹„ìŠ¤ (Compact Ver. - ì¹´í…Œê³ ë¦¬ë³„)
        const services = {
            living: [
                { id: 'address-change', title: 'ì²´ë¥˜ì§€(ì£¼ì†Œ) ë³€ê²½ ì‹ ê³ ', price: 44000, desc: 'ëŒ€í–‰ë£Œ 44,000 + ìˆ˜ìˆ˜ë£Œ 0' },
                { id: 'passport-change', title: 'ì—¬ê¶Œ ì •ë³´ ë³€ê²½ ì‹ ê³ ', price: 22000, desc: 'ëŒ€í–‰ë£Œ 22,000 + ìˆ˜ìˆ˜ë£Œ 0' },
                { id: 'cert-issue', title: 'ì‚¬ì‹¤ì¦ëª… ë°œê¸‰ ëŒ€í–‰', price: 23000, desc: 'ëŒ€í–‰ë£Œ 22,000 + ìˆ˜ìˆ˜ë£Œ 1,000' },
                { id: 'arc-reissue', title: 'ë“±ë¡ì¦ ì¬ë°œê¸‰ ì‹ ì²­', price: 85000, desc: 'ëŒ€í–‰ë£Œ 55,000 + ìˆ˜ìˆ˜ë£Œ 30,000' }
            ],
            extension: [
                { id: 'stay-extension-normal', title: 'ì²´ë¥˜ê¸°ê°„ ì—°ì¥ (ì¼ë°˜)', price: 200000, desc: 'ëŒ€í–‰ë£Œ 140,000 + ìˆ˜ìˆ˜ë£Œ 60,000' },
                { id: 'stay-extension-poor', title: 'ì²´ë¥˜ê¸°ê°„ ì—°ì¥ (ì„±ì ë¯¸ë‹¬)', price: 280000, desc: 'ëŒ€í–‰ë£Œ 220,000 + ìˆ˜ìˆ˜ë£Œ 60,000' },
                { id: 'part-time-normal', title: 'ì‹œê°„ì œì·¨ì—… í—ˆê°€ (ì•Œë°”)', price: 55000, desc: 'ëŒ€í–‰ë£Œ 55,000 + ìˆ˜ìˆ˜ë£Œ 0' },
                { id: 'part-time-manufacture', title: 'ì œì¡°ì—… ì˜ˆì™¸ í—ˆê°€', price: 110000, desc: 'ëŒ€í–‰ë£Œ 110,000 + ìˆ˜ìˆ˜ë£Œ 0' }
            ],
            status_change: [
                { id: 'change-d2', title: 'ì§„í•™/í¸ì… ë³€ê²½ (D-2)', price: 380000, desc: 'ëŒ€í–‰ë£Œ 280,000 + ìˆ˜ìˆ˜ë£Œ 100,000' },
                { id: 'change-d10', title: 'êµ¬ì§ ë¹„ì ë³€ê²½ (D-10)', price: 320000, desc: 'ëŒ€í–‰ë£Œ 220,000 + ìˆ˜ìˆ˜ë£Œ 100,000' },
                { id: 'change-e7', title: 'ì·¨ì—… ë¹„ì ë³€ê²½ (E-7)', price: 1850000, desc: 'ëŒ€í–‰ë£Œ 1,650,000 + ìˆ˜ìˆ˜ë£Œ 200,000' },
                { id: 'change-family', title: 'ê°€ì¡± ì´ˆì²­ ë¹„ì (F-1/F-3)', price: 430000, desc: 'ëŒ€í–‰ë£Œ 330,000 + ìˆ˜ìˆ˜ë£Œ 100,000' }
            ],
            crisis: [
                { id: 'investigation-support', title: 'ì¶œì…êµ­ ì‚¬ë²”ì‹¬ì‚¬ ë™í–‰', price: null, desc: 'ë¶ˆë²•ì•Œë°” ì ë°œ, í­í–‰, ìŒì£¼ ë“± ì¡°ì‚¬ ì¡°ë ¥', consultRequired: true },
                { id: 'deportation-lawsuit', title: 'ì¶œêµ­ëª…ë ¹ ì·¨ì†Œì†Œì†¡', price: null, desc: 'ê°•ì œí‡´ê±°Â·ì¶œêµ­ëª…ë ¹ì— ëŒ€í•œ ì·¨ì†Œì†Œì†¡ ëŒ€ë¦¬', consultRequired: true },
                { id: 'visa-rejection-lawsuit', title: 'ì²´ë¥˜ìê²© ì—°ì¥Â·ë³€ê²½ ë¶ˆí—ˆì²˜ë¶„ ì·¨ì†Œì†Œì†¡', price: null, desc: 'ë¹„ì ì—°ì¥/ë³€ê²½ ê±°ë¶€ ì²˜ë¶„ì— ëŒ€í•œ ì†Œì†¡ ëŒ€ë¦¬', consultRequired: true },
                { id: 'fine-lawsuit', title: 'ë²”ì¹™ê¸ˆë¶€ê³¼ì²˜ë¶„ ì·¨ì†Œì†Œì†¡', price: null, desc: 'ë²”ì¹™ê¸ˆ ë¶€ê³¼ ì²˜ë¶„ì— ëŒ€í•œ ì·¨ì†Œì†Œì†¡ ëŒ€ë¦¬', consultRequired: true }
            ]
        };

        function loadServices(category = 'living') {
            const grid = document.getElementById('serviceGrid');
            grid.innerHTML = '';

            const serviceList = services[category] || services.living;

            serviceList.forEach(service => {
                const card = document.createElement('div');
                card.className = 'service-item';
                card.onclick = () => goToConsent(service);
                card.innerHTML = `
                    <div class="title">${service.title}</div>
                    ${service.consultRequired ? 
                        '<div class="price" style="color:#007A33;font-weight:600;">ìƒë‹´ ì‹ ì²­</div>' : 
                        `<div class="price">${service.price.toLocaleString()}ì›</div>`
                    }
                    <div class="desc">${service.desc}</div>
                `;
                grid.appendChild(card);
            });
        }

        // ë™ì˜ í˜ì´ì§€ë¡œ ì´ë™
        function goToConsent(service) {
            window.location.href = `visa-consent-snu.html?service=${service.id}&name=${encodeURIComponent(service.title)}&amount=${service.price}`;
        }

        // ì¹´í…Œê³ ë¦¬ íƒ­ ì´ë²¤íŠ¸
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const category = this.dataset.category;
                loadServices(category);
            });
        });

        function loadApplications() {
            const container = document.getElementById('applicationsList');
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');

            if (applications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <p>ì•„ì§ ì‹ ì²­í•œ ì„œë¹„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                        <button class="btn-action" onclick="window.scrollTo(0, document.querySelector('.services-section').offsetTop - 100)">
                            <i class="fas fa-plus"></i> ì„œë¹„ìŠ¤ ì‹ ì²­í•˜ê¸°
                        </button>
                    </div>
                `;
                return;
            }

            applications.forEach(app => {
                const card = document.createElement('a');
                card.className = 'application-card';
                card.href = `visa-thread-jnu.html?id=${app.thread_id}`;
                
                let statusClass = 'pending';
                let statusText = 'ëŒ€ê¸°ì¤‘';
                if (app.status === 'processing') {
                    statusClass = 'processing';
                    statusText = 'ì§„í–‰ì¤‘';
                } else if (app.status === 'completed') {
                    statusClass = 'completed';
                    statusText = 'ì™„ë£Œ';
                }

                card.innerHTML = `
                    <div class="application-header">
                        <div class="application-title">${app.service_name}</div>
                        <div class="status-badge ${statusClass}">${statusText}</div>
                    </div>
                    <div class="application-info">
                        <span><i class="fas fa-calendar"></i> ${app.application_date}</span>
                        <span><i class="fas fa-won-sign"></i> ${app.amount.toLocaleString()}ì›</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('currentUser');
                showToast('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.', 'success', 1500);
                setTimeout(() => {
                    window.location.href = 'visa-login-snu.html';
                }, 1500);
            }
        }
    </script>
</body>
</html>
