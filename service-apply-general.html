<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png?v=3">
    <title>Apply for Service - Lawyeon Visa Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">

    <!-- Í≤∞Ï†ú ÌÇ§ ÏÑ§Ï†ï (SDK Î°úÎìú Ï†ÑÏóê ÏÑ†Ïñ∏) -->
    <script>
        window.__PAYMENT_CONFIG__ = {
            tossClientKey: 'live_ck_mBZ1gQ4YVX55PNLM1vkarl2KPoqN'
        };
    </script>
    <!-- Toss Payments SDK v1 (API Í∞úÎ≥Ñ Ïó∞Îèô) -->
    <script src="https://js.tosspayments.com/v1/payment"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #F8FAFC;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #000000 0%, #1a1a2e 100%);
            padding: 20px 0;
            border-bottom: 3px solid #3182F6;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
        }

        .btn-back {
            color: white;
            text-decoration: none;
            font-size: 15px;
            font-weight: 600;
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-back:hover {
            opacity: 1;
        }

        /* Main Container - 2 Column Layout */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 48px 24px;
        }

        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 48px;
            align-items: start;
        }

        /* Left Column - Service Info & Steps */
        .left-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* Service Header */
        .service-header {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }

        .service-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #EBF4FF;
            color: #3182F6;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .service-header h1 {
            font-size: 28px;
            font-weight: 800;
            color: #1E293B;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
            line-height: 1.3;
        }

        .service-header p {
            font-size: 16px;
            color: #64748B;
            font-weight: 500;
            line-height: 1.5;
        }

        /* Price Card */
        .price-card {
            background: white;
            border-radius: 20px;
            padding: 28px 32px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }

        .price-card h2 {
            font-size: 16px;
            font-weight: 700;
            color: #64748B;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid #F1F5F9;
        }

        .price-row:last-of-type {
            border-bottom: none;
        }

        .price-label {
            font-size: 15px;
            color: #475569;
            font-weight: 500;
        }

        .price-value {
            font-size: 16px;
            color: #1E293B;
            font-weight: 700;
        }

        .price-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            margin-top: 8px;
            border-top: 2px solid #E2E8F0;
        }

        .price-total .label {
            font-size: 17px;
            color: #1E293B;
            font-weight: 800;
        }

        .price-total .value {
            font-size: 32px;
            color: #3182F6;
            font-weight: 900;
            letter-spacing: -1px;
        }

        /* Government Fee Notice */
        .govt-notice {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            background: #FEF9C3;
            border: 1px solid #FDE047;
            border-radius: 12px;
            padding: 14px 16px;
            margin-top: 16px;
        }

        .govt-notice i {
            color: #CA8A04;
            font-size: 16px;
            margin-top: 2px;
        }

        .govt-notice-text {
            font-size: 13px;
            color: #854D0E;
            font-weight: 600;
            line-height: 1.5;
        }

        /* Process Steps */
        .process-steps {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }

        .process-steps h2 {
            font-size: 20px;
            font-weight: 800;
            color: #1E293B;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .process-steps h2 i {
            color: #3182F6;
        }

        .step-item {
            display: flex;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid #F1F5F9;
        }

        .step-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .step-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #3182F6 0%, #2563EB 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content h3 {
            font-size: 15px;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 4px;
        }

        .step-content p {
            font-size: 14px;
            color: #64748B;
            font-weight: 500;
            line-height: 1.4;
        }

        /* CTA Button */
        .cta-section {
            margin-top: 8px;
        }

        .btn-primary {
            width: 100%;
            height: 56px;
            background: linear-gradient(135deg, #3182F6 0%, #2563EB 100%);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 16px rgba(49, 130, 246, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(49, 130, 246, 0.4);
        }

        .btn-primary:disabled {
            background: #CBD5E1;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-primary.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Payment Buttons */
        .btn-payment {
            width: 100%;
            height: 60px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 0 20px;
        }

        .btn-payment .btn-logo-area {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .btn-payment .btn-text {
            letter-spacing: 0.2px;
        }

        /* Toss Card Button */
        .btn-toss {
            background: #3182F6;
            color: white;
            box-shadow: 0 2px 12px rgba(49, 130, 246, 0.3);
        }

        .btn-toss .btn-logo-area img {
            height: 18px;
            width: auto;
            object-fit: contain;
        }

        .btn-toss:hover:not(:disabled) {
            background: #1B6DE0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(49, 130, 246, 0.4);
        }

        .btn-toss:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-toss:disabled {
            background: #94A3B8;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Wise Î°úÍ≥† ÌÅ¨Í∏∞ Î≥¥Ï†ï (Ïù¥ÎØ∏ÏßÄ ÎÇ¥ Ïó¨Î∞±Ïù¥ ÏûàÏñ¥ Îçî ÌÅ¨Í≤å) */
        .btn-wise .btn-logo-area img {
            height: 52px;
            width: 52px;
        }

        /* Wise Transfer Button */
        .btn-wise {
            background: #9FE870;
            color: #163300;
            box-shadow: 0 2px 12px rgba(159, 232, 112, 0.3);
            margin-top: 12px;
        }

        .btn-wise .btn-logo-area img {
            height: 24px;
            width: auto;
            object-fit: contain;
        }

        .btn-wise:hover:not(:disabled) {
            background: #8AD85E;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(159, 232, 112, 0.4);
        }

        .btn-wise:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-wise:disabled {
            background: #CBD5E1;
            color: #94A3B8;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Admin Thread Button */
        .btn-admin-thread {
            background: linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%);
            color: white;
            box-shadow: 0 2px 12px rgba(124, 58, 237, 0.3);
            font-size: 17px;
            font-weight: 800;
            gap: 10px;
            margin-top: 12px;
        }

        .btn-admin-thread i {
            font-size: 20px;
        }

        .btn-admin-thread:hover {
            background: linear-gradient(135deg, #6D28D9 0%, #5B21B6 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
        }

        .btn-admin-thread:active {
            transform: translateY(0);
        }

        /* Security Badges */
        .security-badges {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 16px;
        }

        .security-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 500;
        }

        .toss-badge {
            background: #F0F6FF;
            color: #3182F6;
        }

        .toss-badge i {
            color: #3182F6;
        }

        .wise-security-badge {
            background: #F0F6FF;
            color: #3182F6;
        }

        .wise-security-badge i {
            color: #3182F6;
        }

        /* Right Column - Thread Preview */
        .right-column {
            position: sticky;
            top: 100px;
        }

        .thread-preview {
            background: white;
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
            border: 1px solid #E2E8F0;
        }

        .thread-preview-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #F1F5F9;
        }

        .thread-preview-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #3182F6 0%, #2563EB 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .thread-preview-title {
            flex: 1;
        }

        .thread-preview-title h3 {
            font-size: 16px;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 2px;
        }

        .thread-preview-title p {
            font-size: 13px;
            color: #64748B;
            font-weight: 500;
        }

        .thread-preview-image {
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            background: #F8FAFC;
            border: 1px solid #E2E8F0;
        }

        .thread-preview-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Thread mockup placeholder */
        .thread-mockup {
            background: linear-gradient(180deg, #F8FAFC 0%, #EFF6FF 100%);
            padding: 20px;
            min-height: 400px;
        }

        .mockup-message {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .mockup-message.admin {
            background: #EBF4FF;
            border-left: 3px solid #3182F6;
        }

        .mockup-message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .mockup-avatar {
            width: 28px;
            height: 28px;
            background: #3182F6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .mockup-avatar.user {
            background: #10B981;
        }

        .mockup-name {
            font-size: 13px;
            font-weight: 600;
            color: #1E293B;
        }

        .mockup-time {
            font-size: 11px;
            color: #94A3B8;
            margin-left: auto;
        }

        .mockup-text {
            font-size: 14px;
            color: #475569;
            line-height: 1.5;
        }

        .thread-preview-caption {
            text-align: center;
            padding: 16px;
            color: #64748B;
            font-size: 14px;
            font-weight: 500;
        }

        .thread-preview-caption strong {
            color: #3182F6;
            font-weight: 700;
        }

        /* Security Badge */
        .security-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #F0FDF4;
            border: 1px solid #86EFAC;
            border-radius: 12px;
            padding: 12px 16px;
            margin-top: 16px;
        }

        .security-badge i {
            color: #22C55E;
            font-size: 18px;
        }

        .security-badge-text {
            font-size: 13px;
            color: #166534;
            font-weight: 600;
        }

        /* Loading State */
        .loading-container {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #E5E7EB;
            border-top-color: #3182F6;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 16px;
        }

        .loading-text {
            font-size: 15px;
            color: #6B7280;
            font-weight: 600;
        }

        /* Mobile Responsive */
        @media (max-width: 968px) {
            .two-column-layout {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .right-column {
                position: static;
                order: -1;
            }

            .thread-preview {
                display: none;
            }

            .main-container {
                padding: 24px 16px;
            }

            .service-header,
            .price-card,
            .process-steps {
                padding: 24px 20px;
                border-radius: 16px;
            }

            .service-header h1 {
                font-size: 22px;
            }

            .price-total .value {
                font-size: 26px;
            }

            .step-item {
                gap: 12px;
            }

            .step-number {
                width: 28px;
                height: 28px;
                font-size: 13px;
            }
        }

        /* Consulting Mode Styles */
        .consulting-badge {
            background: #FEF3C7;
            color: #D97706;
        }

        .consulting-notice {
            background: linear-gradient(135deg, #FEF3C7 0%, #FFFBEB 100%);
            border: 1px solid #FCD34D;
            border-radius: 16px;
            padding: 20px 24px;
            display: flex;
            gap: 14px;
            align-items: flex-start;
        }

        .consulting-notice i {
            color: #D97706;
            font-size: 22px;
            margin-top: 2px;
        }

        .consulting-notice-content h3 {
            font-size: 17px;
            font-weight: 800;
            color: #92400E;
            margin-bottom: 6px;
        }

        .consulting-notice-content p {
            font-size: 14px;
            color: #78350F;
            font-weight: 600;
            line-height: 1.5;
        }

        /* D-10-1 Question Form Styles */
        .service-form {
            background: white;
            border-radius: 20px;
            padding: 28px 32px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }

        .service-form h2 {
            font-size: 18px;
            font-weight: 800;
            color: #1E293B;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-form h2 i {
            color: #3182F6;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 8px;
        }

        .form-group label .required {
            color: #EF4444;
            margin-left: 4px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 10px;
            font-size: 15px;
            font-family: 'Noto Sans KR', sans-serif;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3182F6;
            box-shadow: 0 0 0 3px rgba(49, 130, 246, 0.1);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group .hint {
            font-size: 13px;
            color: #6B7280;
            margin-top: 6px;
            line-height: 1.5;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .form-section-title {
            font-size: 15px;
            font-weight: 700;
            color: #3182F6;
            margin: 24px 0 16px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #EBF4FF;
        }

        .radio-group {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: #3182F6;
        }

        .radio-option span {
            font-size: 14px;
            color: #374151;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            cursor: pointer;
        }

        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            accent-color: #3182F6;
            flex-shrink: 0;
        }

        .checkbox-option span {
            font-size: 14px;
            color: #374151;
            line-height: 1.5;
        }

        .info-box {
            background: #EBF4FF;
            border: 1px solid #BFDBFE;
            border-radius: 10px;
            padding: 14px 16px;
            margin-top: 16px;
        }

        .info-box p {
            font-size: 13px;
            color: #1E40AF;
            line-height: 1.6;
            margin: 0;
        }

        .info-box strong {
            font-weight: 700;
        }

        /* Deferred Payment Notice */
        .deferred-notice {
            background: linear-gradient(135deg, #EBF4FF 0%, #DBEAFE 100%);
            border: 1px solid #93C5FD;
            border-radius: 12px;
            padding: 14px 16px;
            margin-top: 16px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .deferred-notice i {
            color: #3182F6;
            font-size: 18px;
            margin-top: 2px;
        }

        .deferred-notice-text {
            font-size: 14px;
            color: #1E40AF;
            font-weight: 600;
            line-height: 1.5;
        }

        /* Service Consent Checkbox */
        .service-consent-area {
            margin-top: 20px;
            padding: 16px 20px;
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
        }

        .service-consent-label {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }

        .service-consent-label input[type="checkbox"] {
            display: none;
        }

        .service-consent-label .consent-mark {
            width: 20px;
            height: 20px;
            min-width: 20px;
            border: 2px solid #D1D5DB;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            margin-top: 1px;
        }

        .service-consent-label .consent-mark::after {
            content: '';
            display: none;
            width: 5px;
            height: 9px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
            margin-top: -2px;
        }

        .service-consent-label input[type="checkbox"]:checked + .consent-mark {
            background: #3182F6;
            border-color: #3182F6;
        }

        .service-consent-label input[type="checkbox"]:checked + .consent-mark::after {
            display: block;
        }

        .service-consent-text {
            font-size: 13px;
            color: #374151;
            line-height: 1.6;
            font-weight: 500;
        }

        .service-consent-links {
            margin-top: 6px;
            margin-left: 30px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .service-consent-links a {
            font-size: 12px;
            color: #3182F6;
            text-decoration: none;
            font-weight: 500;
        }

        .service-consent-links a:hover {
            text-decoration: underline;
        }

        /* WISE Modal */
        .wise-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .wise-modal-overlay.active {
            display: flex;
        }

        .wise-modal {
            background: white;
            border-radius: 20px;
            max-width: 420px;
            width: 100%;
            padding: 32px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .wise-modal-icon {
            width: 64px;
            height: 64px;
            background: #9FE870;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 28px;
            font-weight: 700;
            color: white;
        }

        .wise-modal h2 {
            font-size: 20px;
            font-weight: 700;
            color: #191F28;
            margin-bottom: 4px;
        }

        .wise-modal h2 span {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #6B7280;
            margin-top: 4px;
        }

        .wise-modal-info {
            background: #F8FAFC;
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: left;
        }

        .wise-modal-info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #E5E7EB;
        }

        .wise-modal-info-row:last-child {
            border-bottom: none;
        }

        .wise-modal-info-row.total {
            padding-top: 12px;
            margin-top: 4px;
            border-top: 2px solid #E5E7EB;
            border-bottom: none;
        }

        .wise-modal-info-label {
            color: #6B7280;
            font-size: 14px;
        }

        .wise-modal-info-value {
            color: #191F28;
            font-weight: 600;
            font-size: 14px;
        }

        .wise-modal-info-row.total .wise-modal-info-label {
            font-weight: 700;
            color: #191F28;
        }

        .wise-modal-info-row.total .wise-modal-info-value {
            font-size: 18px;
            font-weight: 800;
            color: #3182F6;
        }

        .wise-modal-notice {
            background: #F0FDF4;
            border: 1px solid #86EFAC;
            border-radius: 12px;
            padding: 14px 16px;
            margin-bottom: 20px;
            text-align: left;
        }

        .wise-modal-notice strong {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: #166534;
            margin-bottom: 6px;
        }

        .wise-modal-notice p {
            font-size: 13px;
            color: #166534;
            line-height: 1.5;
            margin: 0;
        }

        .wise-modal-btn {
            width: 100%;
            height: 52px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 10px;
        }

        .wise-modal-btn.primary {
            background: linear-gradient(135deg, #9FE870 0%, #7DD956 100%);
            color: #1F2937;
        }

        .wise-modal-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(159, 232, 112, 0.4);
        }

        .wise-modal-btn.secondary {
            background: white;
            color: #6B7280;
            border: 2px solid #E5E7EB;
        }

        .wise-modal-btn.secondary:hover {
            background: #F9FAFB;
        }

        .wise-modal-btn.loading {
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-inner">
            <div class="header-title" data-i18n="serviceApply.header">Apply for Service</div>
            <a href="javascript:void(0)" onclick="goBack()" class="btn-back">
                <i class="fas fa-times"></i>
            </a>
        </div>
    </div>

    <!-- Loading State -->
    <div class="main-container">
        <div id="loading" class="loading-container">
            <div class="spinner"></div>
            <div class="loading-text" data-i18n="serviceApply.loading">Loading service information...</div>
        </div>

        <!-- Main Content -->
        <div id="main-content" class="two-column-layout" style="display: none;">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Service Header -->
                <div class="service-header">
                    <div class="service-badge" id="service-badge">
                        <i class="fas fa-file-alt"></i>
                        <span id="service-badge-text">Visa Service</span>
                    </div>
                    <h1 id="service-name">Visa Extension</h1>
                    <p id="service-desc">Extension of your current residence status</p>
                </div>

                <!-- Price Card (for payment services) -->
                <div class="price-card" id="price-card">
                    <h2 data-i18n="serviceApply.priceDetails">Price Details</h2>
                    <div class="price-row">
                        <span class="price-label" data-i18n="serviceApply.agencyFee">Agency Fee</span>
                        <span class="price-value" id="agency-fee">‚Ç©550,000</span>
                    </div>
                    <div class="price-row" id="govt-fee-row" style="display: none;">
                        <span class="price-label" data-i18n="serviceApply.govtFee">Immigration Fee</span>
                        <span class="price-value" id="govt-fee">‚Ç©50,000</span>
                    </div>
                    <div class="price-total">
                        <span class="label" data-i18n="serviceApply.total">Total</span>
                        <span class="value" id="total-price">‚Ç©600,000</span>
                    </div>
                    <div class="govt-notice" id="govt-notice" style="display: none;">
                        <i class="fas fa-info-circle"></i>
                        <span class="govt-notice-text" data-i18n="serviceApply.govtNotice">Immigration fee is included and paid by our center on your behalf.</span>
                    </div>
                    <div class="deferred-notice" id="deferred-notice" style="display: none;">
                        <i class="fas fa-comments"></i>
                        <span class="deferred-notice-text" data-i18n="serviceApply.deferredNotice">Payment will be requested after consultation with our specialist.</span>
                    </div>

                </div>

                <!-- Consulting Notice (for consulting services) -->
                <div class="consulting-notice" id="consulting-notice" style="display: none;">
                    <i class="fas fa-star"></i>
                    <div class="consulting-notice-content">
                        <h3>Get a Custom Quote</h3>
                        <p>Every case is different. We'll provide an accurate quote after understanding your situation.</p>
                    </div>
                </div>

                <!-- D-10-1 Application Form -->
                <div class="service-form" id="d10-1-form" style="display: none;">
                    <h2><i class="fas fa-clipboard-list"></i> Application Information</h2>
                    <p style="font-size: 14px; color: #64748B; margin-bottom: 20px;">Please provide the following information to process your D-10-1 visa application. Our specialist will review and contact you.</p>

                    <div class="form-section-title">üìã Basic Eligibility</div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Current Visa Status <span class="required">*</span></label>
                            <select id="d10-current-visa" required>
                                <option value="">Select your current visa</option>
                                <option value="D-2-1">D-2-1 (Associate Degree)</option>
                                <option value="D-2-2">D-2-2 (Bachelor's Degree)</option>
                                <option value="D-2-3">D-2-3 (Master's Degree)</option>
                                <option value="D-2-4">D-2-4 (Doctoral Degree)</option>
                                <option value="D-2-5">D-2-5 (Research)</option>
                                <option value="D-2-6">D-2-6 (Exchange Student)</option>
                                <option value="D-2-7">D-2-7 (Language + Degree)</option>
                                <option value="D-2-8">D-2-8 (Short-term Study)</option>
                                <option value="D-4">D-4 (Language Training)</option>
                                <option value="Other">Other (Please specify below)</option>
                            </select>
                            <p class="hint">D-10-1 is typically available for D-2 visa holders</p>
                        </div>
                        <div class="form-group">
                            <label>Visa Expiry Date <span class="required">*</span></label>
                            <input type="date" id="d10-visa-expiry" required>
                            <p class="hint">Must apply before current visa expires</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Graduation Date <span class="required">*</span></label>
                            <input type="date" id="d10-graduation-date" required>
                            <p class="hint">Points exemption available within 1 year of graduation</p>
                        </div>
                        <div class="form-group">
                            <label>Degree Type <span class="required">*</span></label>
                            <select id="d10-degree-type" required>
                                <option value="">Select degree type</option>
                                <option value="Associate">Associate Degree (2-year)</option>
                                <option value="Bachelor">Bachelor's Degree (4-year)</option>
                                <option value="Master">Master's Degree</option>
                                <option value="Doctoral">Doctoral Degree (PhD)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>University Name (in Korea) <span class="required">*</span></label>
                        <input type="text" id="d10-university" placeholder="e.g., Seoul National University" required>
                        <p class="hint">Must be a regular university in South Korea</p>
                    </div>

                    <div class="form-section-title">üè† Residence Information</div>

                    <div class="form-group">
                        <label>Current Address in Korea <span class="required">*</span></label>
                        <input type="text" id="d10-address" placeholder="e.g., 123 Gangnam-daero, Gangnam-gu, Seoul" required>
                    </div>

                    <div class="form-group">
                        <label>Proof of Residence <span class="required">*</span></label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="d10-residence-proof" value="lease" required>
                                <span>Housing contract (Lease/Jeonse)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-residence-proof" value="dormitory">
                                <span>Dormitory residence certificate</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-residence-proof" value="host">
                                <span>Host invitation (staying with family/friend)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-residence-proof" value="other">
                                <span>Other (Please explain below)</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-section-title">üìù Korean Language & Work Plans</div>

                    <div class="form-group">
                        <label>Korean Language Proficiency</label>
                        <select id="d10-korean-level">
                            <option value="">Select if applicable</option>
                            <option value="TOPIK-1">TOPIK Level 1</option>
                            <option value="TOPIK-2">TOPIK Level 2</option>
                            <option value="TOPIK-3">TOPIK Level 3</option>
                            <option value="TOPIK-4">TOPIK Level 4</option>
                            <option value="TOPIK-5">TOPIK Level 5</option>
                            <option value="TOPIK-6">TOPIK Level 6</option>
                            <option value="KIIP-3">KIIP Level 3</option>
                            <option value="KIIP-4">KIIP Level 4 (Intermediate passed)</option>
                            <option value="KIIP-5">KIIP Level 5</option>
                            <option value="None">No certificate</option>
                        </select>
                        <p class="hint">TOPIK 4+ or KIIP 4+ required for part-time work permission</p>
                    </div>

                    <div class="form-group">
                        <label>Previous E-series Visa History</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="d10-e-visa-history" value="no" checked>
                                <span>No previous E-1~E-7 visa</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-e-visa-history" value="yes">
                                <span>Had E-1~E-7 visa before</span>
                            </label>
                        </div>
                        <p class="hint">Previous E-visa holders are NOT eligible for part-time work on D-10</p>
                    </div>

                    <div class="form-group">
                        <label>Do you plan to do internships?</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="d10-internship-plan" value="yes">
                                <span>Yes, I plan to do internships</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-internship-plan" value="no" checked>
                                <span>No immediate plans</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="d10-internship-plan" value="already">
                                <span>I already have an internship offer</span>
                            </label>
                        </div>
                        <p class="hint">Internships must be reported within 15 days of starting</p>
                    </div>

                    <div class="form-section-title">üíº Job Seeking Plan</div>

                    <div class="form-group">
                        <label>Target Industry/Field <span class="required">*</span></label>
                        <input type="text" id="d10-target-industry" placeholder="e.g., IT/Software Development, Marketing, Engineering" required>
                    </div>

                    <div class="form-group">
                        <label>Job Seeking Activities (Brief Plan) <span class="required">*</span></label>
                        <textarea id="d10-job-plan" placeholder="Describe your job search plan, e.g.:
- Applying to tech companies in Seoul
- Using job portals (Saramin, JobKorea, LinkedIn)
- Attending career fairs at my university
- Networking with alumni in my field" required></textarea>
                        <p class="hint">This will be used for your Job Seeking Plan document</p>
                    </div>

                    <div class="form-section-title">üìé Additional Notes</div>

                    <div class="form-group">
                        <label>Additional Information or Questions</label>
                        <textarea id="d10-additional-notes" placeholder="Any special circumstances, questions, or concerns you'd like us to know about..."></textarea>
                    </div>

                    <div class="info-box">
                        <p><strong>üìå New Graduate Exemption:</strong> If you graduated within 1 year, you are <strong>exempt from the points system</strong> and <strong>do not need to submit bank statements</strong> (proof of financial ability).</p>
                    </div>
                </div>

                <!-- Process Steps -->
                <div class="process-steps">
                    <h2><i class="fas fa-list-check"></i> <span data-i18n="serviceApply.howItWorks">How It Works</span></h2>

                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3 data-i18n="serviceApply.step1Title">Submit Application</h3>
                            <p data-i18n="serviceApply.step1Desc">A dedicated thread will be created instantly</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3 data-i18n="serviceApply.step2Title">Specialist Assigned</h3>
                            <p data-i18n="serviceApply.step2Desc">We'll contact you within 30 minutes</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3 data-i18n="serviceApply.step3Title">Document Review</h3>
                            <p data-i18n="serviceApply.step3Desc">We'll guide you through required documents</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3 data-i18n="serviceApply.step4Title">Service Complete</h3>
                            <p data-i18n="serviceApply.step4Desc">We'll handle everything until completion</p>
                        </div>
                    </div>
                </div>

                <!-- Service Consent -->
                <div class="service-consent-area" id="service-consent-area">
                    <label class="service-consent-label">
                        <input type="checkbox" id="serviceConsentCheck" onchange="onServiceConsentChange()">
                        <span class="consent-mark"></span>
                        <span class="service-consent-text" id="serviceConsentText"></span>
                    </label>
                    <div class="service-consent-links">
                        <a href="terms-of-service.html" target="_blank"><i class="fas fa-external-link-alt"></i> <span data-i18n="footer.terms">ÏÑúÎπÑÏä§ Ïù¥Ïö©ÏïΩÍ¥Ä</span></a>
                        <a href="privacy-policy.html" target="_blank"><i class="fas fa-external-link-alt"></i> <span data-i18n="footer.privacy">Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ®</span></a>
                    </div>
                </div>

                <!-- CTA Buttons -->
                <div class="cta-section">
                    <button class="btn-payment btn-toss" id="payBtn" onclick="processPayment()" disabled>
                        <div class="btn-logo-area">
                            <img src="Toss_Logo_Button_Type.png" alt="Toss">
                        </div>
                        <span id="btn-text" class="btn-text" data-i18n="payment.payWithCard">Pay with Card</span>
                    </button>

                    <button class="btn-payment btn-wise" id="wiseBtn" onclick="processWisePayment()" disabled>
                        <div class="btn-logo-area">
                            <img src="wise_logo.png" alt="Wise" style="height: 52px; width: 52px;">
                        </div>
                        <span class="btn-text" data-i18n="payment.bankTransfer">Bank Transfer</span>
                    </button>

                    <!-- Í¥ÄÎ¶¨Ïûê Ï†ÑÏö©: ÌÖåÏä§Ìä∏ Ïì∞Î†àÎìú Ïó¥Í∏∞ Î≤ÑÌäº (Wise ÏïÑÎûò, Í¥ÄÎ¶¨Ïûê Î™®ÎìúÏùº ÎïåÎßå ÌëúÏãú) -->
                    <button class="btn-payment btn-admin-thread" id="adminThreadBtn" onclick="createAdminTestThread()" style="display: none;">
                        <i class="fas fa-comments"></i>
                        <span class="btn-text">ÌÖåÏä§Ìä∏ Ïì∞Î†àÎìú Ïó¥Í∏∞</span>
                    </button>

                    <div class="security-badges">
                        <div class="security-badge toss-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span data-i18n="payment.securedByToss">Secured by Toss Payments ¬∑ PCI DSS Certified</span>
                        </div>
                        <div class="security-badge wise-security-badge">
                            <i class="fas fa-lock"></i>
                            <span data-i18n="payment.securedByWise">Wise is FCA regulated</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Thread Preview -->
            <div class="right-column">
                <div class="thread-preview">
                    <div class="thread-preview-header">
                        <div class="thread-preview-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="thread-preview-title">
                            <h3 data-i18n="serviceApply.dedicatedThread">Your Dedicated Thread</h3>
                            <p data-i18n="serviceApply.realtimeComm">Real-time communication with our team</p>
                        </div>
                    </div>

                    <div class="thread-preview-image">
                        <img src="images/thread-preview.png" alt="Thread Preview" style="width: 100%; height: auto; display: block;">
                    </div>

                    <div class="thread-preview-caption" data-i18n="serviceApply.trackProgress">Track your progress in real-time through your dedicated thread</div>
                </div>
            </div>
        </div>
    </div>

    <!-- WISE Modal -->
    <div class="wise-modal-overlay" id="wiseModalOverlay" onclick="closeWiseModal(event)">
        <div class="wise-modal" onclick="event.stopPropagation()">
            <div class="wise-modal-icon">W</div>
            <h2 id="wiseModalTitle">Bank Transfer via WISE</h2>

            <div class="wise-modal-info">
                <div class="wise-modal-info-row">
                    <span class="wise-modal-info-label" id="wiseServiceLabel">Service</span>
                    <span class="wise-modal-info-value" id="wiseServiceName">-</span>
                </div>
                <div class="wise-modal-info-row">
                    <span class="wise-modal-info-label" id="wiseOrderLabel">Order ID</span>
                    <span class="wise-modal-info-value" id="wiseOrderId">-</span>
                </div>
                <div class="wise-modal-info-row total">
                    <span class="wise-modal-info-label" id="wiseAmountLabel">Amount</span>
                    <span class="wise-modal-info-value" id="wiseAmount">-</span>
                </div>
            </div>

            <div class="wise-modal-notice" id="wiseNotice">
                <strong>Instructions:</strong>
                <p>Click the button below to pay via WISE.</p>
                <p style="margin-top: 8px;">Service will start after admin confirms payment.</p>
            </div>

            <button class="wise-modal-btn primary" id="wisePayBtn" onclick="processWiseModalPayment()">
                Pay with WISE
            </button>
            <button class="wise-modal-btn secondary" id="wiseCloseBtn" onclick="closeWiseModal()">
                Close
            </button>
        </div>
    </div>

    <script>
        // Immigration Fees (Based on Immigration Control Act)
        const govtFees = {
            'visa-extension': 50000,
            'visa-change': 119000,
            'visa-grant': 80000,
            'workplace-change': 99000,
            'outside-activity': 120000,
            'arc-application': 30000,
            'arc-reissue': 30000,
            'arc-change': 30000,
            'f4-residence': 30000,
            'naturalization': 300000,
            'nationality-recovery': 200000,
            'nationality-acquisition': 20000,
            'nationality-selection': 20000,
            'nationality-loss': 20000,
            'nationality-retention': 20000,
            'cert-entry-exit': 2000,
            'cert-arc': 2000,
            'cert-residence': 2000,
            'cert-realestate': 2000,
            'cert-number-change': 2000,
            'cert-nationality': 2000
        };

        // Service Pricing (Agency fee, VAT included)
        const servicePricing = {
            // Premium Services
            'visa-prediagnosis': { name: 'Visa Legal Advice', price: 55000, govFee: 0, desc: 'Visa change, overstay risk, immigration law consultation', icon: 'üîç', badge: 'Legal Advice' },
            'emergency-legal': { name: 'Immigration Dispute Resolution', price: 0, govFee: 0, desc: 'Criminal investigation, deportation defense, visa denial appeals', icon: '‚öñÔ∏è', deferredPayment: true },
            'pre-consultation': { name: 'Pre-Consultation', nameKo: 'ÏÇ¨Ï†Ñ ÏÉÅÎã¥', price: 0, govFee: 0, desc: 'Free initial consultation via navigator', descKo: 'ÎÑ§ÎπÑÍ≤åÏù¥ÌÑ∞Î•º ÌÜµÌïú Î¨¥Î£å ÏÇ¨Ï†Ñ ÏÉÅÎã¥', icon: 'üí¨', deferredPayment: true, hidden: true },

            // Education & Job Search
            'd4-to-d2-change': { name: 'D-4‚ÜíD-2 Student Visa Change', price: 110000, govFee: 119000, desc: 'Language course to degree program', icon: 'üéì' },
            'd10-1-change': { name: 'D-10-1 Job Seeker Visa Change', price: 220000, govFee: 100000, desc: 'General job seeking visa', icon: 'üîç' },
            'd10-1-dhu': { name: 'D-10-1 General Job Seeker Visa (DHU)', price: 55000, govFee: 100000, desc: 'Daegu Haany University special rate', icon: 'üéì', organization: 'dhu' },
            'd10-2-change': { name: 'D-10-2 Tech Startup Job Seeker', price: 330000, govFee: 100000, desc: 'Startup preparation visa', icon: 'üí°' },
            'd10-3-change': { name: 'D-10-3 High-tech Intern Visa', price: 330000, govFee: 100000, desc: 'Advanced technology internship', icon: 'üî¨' },
            'd10-t-change': { name: 'D-10-T Top Talent Job Seeker', price: 330000, govFee: 100000, desc: 'Elite university graduate visa', icon: 'üèÜ' },
            'd2-d4-extension': { name: 'D-2, D-4 Visa Extension', price: 110000, govFee: 50000, desc: 'Student visa renewal', icon: 'üìñ' },
            'd10-extension': { name: 'D-10 Visa Extension', price: 220000, govFee: 50000, desc: 'Job seeker visa renewal', icon: '‚è≥' },
            'parttime-permit': { name: 'Part-time Work Permit', price: 33000, govFee: 0, desc: 'D-2, D-4 part-time employment', icon: '‚è∞' },
            'intern-report': { name: 'Internship Start/Change Report', price: 110000, govFee: 0, desc: 'D-10 internship notification', icon: 'üìù' },
            'parent-invite': { name: 'Student Parent Invitation', price: 550000, govFee: 60000, desc: 'Excellent student parent visa', icon: 'üë®‚Äçüë©‚Äçüëß' },

            // Employment
            'e7-4-change': { name: 'E-7-4 Skilled Worker Visa', price: 550000, govFee: 119000, desc: 'E-9/H-2 skilled transition', icon: 'üîß' },
            'e7-4r-change': { name: 'E-7-4R Regional Skilled Worker', price: 550000, govFee: 119000, desc: 'Depopulated area skilled worker', icon: 'üèòÔ∏è' },
            'e7-change': { name: 'E-7 Professional Visa Change', price: 550000, govFee: 100000, desc: 'Professional employment visa', icon: 'üíº' },
            'f2-7-change': { name: 'F-2-7 Points-based Residence', price: 550000, govFee: 100000, desc: 'Outstanding talent residence', icon: '‚≠ê' },
            'f2-r-change': { name: 'F-2-R Regional Residence Visa', price: 550000, govFee: 100000, desc: 'Depopulated area residence', icon: 'üè°' },
            'e7-st-change': { name: 'E-7-S/T Elite Professional', price: 550000, govFee: 100000, desc: 'High-tech/high-income talent', icon: 'üèÜ' },
            'e1-e6-change': { name: 'E-1~E-6 Professional Change', price: 550000, govFee: 100000, desc: 'Professor, researcher, specialist', icon: 'üéì' },
            'e7-extension': { name: 'E-7 Visa Extension', price: 110000, govFee: 60000, desc: 'Professional visa renewal', icon: 'üìÖ' },
            'e9-workplace-change': { name: 'E-9 Workplace Change', price: 220000, govFee: 99000, desc: 'E-9 employer change', icon: 'üè≠' },
            'workplace-change-permit': { name: 'Workplace Change Permit', price: 220000, govFee: 120000, desc: 'Job transfer pre-approval', icon: 'üè¢' },
            'outside-activity': { name: 'Additional Activity Permit', price: 220000, govFee: 120000, desc: 'Activities beyond visa scope', icon: 'üîì' },
            'h2-work-start': { name: 'H-2 Employment Start Report', price: 55000, govFee: 0, desc: 'Working visit job notification', icon: 'üìã' },
            'workplace-change-report': { name: 'Workplace Change Report', price: 110000, govFee: 0, desc: 'Job transfer post-notification', icon: 'üìù' },
            'employment-info-change': { name: 'Employment Info Update', price: 55000, govFee: 0, desc: 'Workplace/salary change report', icon: 'üí∞' },
            'dispatch-report': { name: 'Dispatch Work Report', price: 110000, govFee: 0, desc: 'Subsidiary assignment report', icon: 'üîÑ' },
            'income-report': { name: 'Annual Income Report', price: 55000, govFee: 0, desc: 'Job and income notification', icon: 'üíµ' },
            'foreign-worker-change': { name: 'Foreign Worker Status Report', price: 55000, govFee: 0, desc: 'Resignation/departure report', icon: 'üìä' },

            // Business & Investment
            'd8-1-change': { name: 'D-8-1 Corporate Investment', price: 1100000, govFee: 100000, desc: 'Corporate establishment visa', icon: 'üè¢' },
            'd8-2-change': { name: 'D-8-2 Venture Investment', price: 1100000, govFee: 100000, desc: 'Venture company investment', icon: 'üöÄ' },
            'd8-3-change': { name: 'D-8-3 Individual Investment', price: 1100000, govFee: 100000, desc: 'Sole proprietor investment', icon: 'üíº' },
            'd8-4-change': { name: 'D-8-4 Tech Startup Visa', price: 1100000, govFee: 100000, desc: 'Student entrepreneur visa', icon: 'üí°' },
            'd9-1-change': { name: 'D-9-1 Trade Business', price: 1100000, govFee: 100000, desc: 'Trading business visa', icon: 'üåê' },
            'd9-2-change': { name: 'D-9-2 Export Equipment', price: 1100000, govFee: 100000, desc: 'Export facility management', icon: 'üè≠' },
            'd9-3-change': { name: 'D-9-3 Shipbuilding Supervisor', price: 1100000, govFee: 100000, desc: 'Ship/equipment supervision', icon: '‚öì' },
            'd9-4-change': { name: 'D-9-4 Commercial Business', price: 1100000, govFee: 100000, desc: 'Individual commercial visa', icon: 'üìä' },
            'd9-5-change': { name: 'D-9-5 Graduate Entrepreneur', price: 1100000, govFee: 100000, desc: 'Former student business', icon: 'üéì' },
            'business-extension': { name: 'D-8, D-9 Business Extension', price: 1100000, govFee: 60000, desc: 'Investment visa renewal', icon: 'üìÖ' },
            'fic-registration': { name: 'Foreign Investment Registration', price: 330000, govFee: 0, desc: 'FIC certificate issuance', icon: 'üìã' },
            'fi-report': { name: 'Foreign Investment Report', price: 220000, govFee: 0, desc: 'Investment pre-notification', icon: 'üìù' },

            // Ethnic Korean & Family
            'h2-to-f4-change': { name: 'H-2‚ÜíF-4 Overseas Korean', price: 550000, govFee: 119000, desc: 'Working visit to overseas Korean', icon: 'üá∞üá∑' },
            'f4-change': { name: 'F-4 Overseas Korean Visa', price: 220000, govFee: 100000, desc: 'Overseas Korean status', icon: 'üéå' },
            'f4-registration': { name: 'F-4 Residence Registration', price: 110000, govFee: 35000, desc: 'F-4 residence card issuance', icon: 'üìç' },
            'f4-extension': { name: 'F-4 Visa Extension', price: 110000, govFee: 50000, desc: 'F-4 residence renewal', icon: 'üìÖ' },
            'h2-extension': { name: 'H-2 Visa Extension', price: 110000, govFee: 50000, desc: 'Working visit renewal', icon: 'üõ¨' },
            'f6-change': { name: 'F-6 Marriage Immigration', price: 550000, govFee: 100000, desc: 'Spouse visa acquisition', icon: 'üíç' },
            'f6-extension': { name: 'F-6 Visa Extension', price: 110000, govFee: 30000, desc: 'Marriage visa renewal', icon: 'üíí' },
            'f3-change': { name: 'F-3 Dependent Family Visa', price: 330000, govFee: 100000, desc: 'Spouse/child accompanying', icon: 'üë™' },
            'f1-change': { name: 'F-1 Family Visit Visa', price: 330000, govFee: 100000, desc: 'Relative long-term stay', icon: 'üè†' },
            'visa-grant-child': { name: 'Child Birth Visa Grant', price: 220000, govFee: 80000, desc: 'Newborn child visa', icon: 'üë∂' },
            'visa-grant-f6-child': { name: 'F-6 Child Visa Grant', price: 220000, govFee: 40000, desc: 'Marriage immigrant child', icon: 'üë∂' },
            'family-invite': { name: 'Family Invitation Visa', price: 550000, govFee: 60000, desc: 'Overseas family invitation', icon: '‚úàÔ∏è' },
            'housework-report': { name: 'Domestic Work Report', price: 55000, govFee: 0, desc: 'Household help notification', icon: 'üè°' },

            // Residence & Citizenship
            'f5-change': { name: 'F-5 Permanent Residence', price: 1100000, govFee: 200000, desc: 'Korea permanent residency', icon: 'üè†' },
            'f5-reissue': { name: 'F-5 Card Renewal (10yr)', price: 110000, govFee: 35000, desc: 'Permanent residence card', icon: 'üîÑ' },
            'f2-extension': { name: 'F-2 Residence Extension', price: 110000, govFee: 60000, desc: 'Residence visa renewal', icon: 'üè°' },
            'naturalization': { name: 'Naturalization Application', price: 1100000, govFee: 300000, desc: 'Korean citizenship', icon: 'üèõÔ∏è' },
            'nationality-recovery': { name: 'Nationality Recovery', price: 550000, govFee: 200000, desc: 'Former Korean citizenship', icon: 'üîô' },
            'nationality-selection': { name: 'Nationality Selection', price: 110000, govFee: 20000, desc: 'Dual citizen selection', icon: 'üåç' },
            'nationality-renounce': { name: 'Nationality Renunciation', price: 110000, govFee: 20000, desc: 'Korean citizenship waiver', icon: 'üìÑ' },
            'nationality-loss': { name: 'Nationality Loss Report', price: 110000, govFee: 0, desc: 'Foreign citizenship report', icon: 'üìã' },
            'nationality-retention': { name: 'Nationality Retention', price: 110000, govFee: 20000, desc: 'Citizenship retention intent', icon: '‚úçÔ∏è' },
            'nationality-acquisition': { name: 'Nationality Acquisition', price: 110000, govFee: 20000, desc: 'Recognition-based citizenship', icon: 'üìú' },
            'nationality-judgment': { name: 'Nationality Determination', price: 110000, govFee: 30000, desc: 'Nationality status inquiry', icon: '‚öñÔ∏è' },

            // General Registration & Certificates
            'arc-registration': { name: 'Alien Registration', price: 110000, govFee: 35000, desc: 'Required within 90 days', icon: 'üÜî' },
            'arc-reissue': { name: 'ARC Reissue', price: 110000, govFee: 35000, desc: 'Lost/damaged card replacement', icon: 'üîÑ' },
            'address-change': { name: 'Address Change Report', price: 33000, govFee: 0, desc: 'Moving address update', icon: 'üè†' },
            'f4-address-change': { name: 'F-4 Address Change', price: 33000, govFee: 0, desc: 'Overseas Korean address', icon: 'üá∞üá∑' },
            'passport-change': { name: 'Passport/Info Change', price: 33000, govFee: 0, desc: 'Passport/name update', icon: 'üìù' },
            'reentry-permit-multiple': { name: 'Multiple Re-entry Permit', price: 55000, govFee: 41300, desc: 'Multiple border crossings', icon: 'üîÅ' },
            'reentry-permit-single': { name: 'Single Re-entry Permit', price: 55000, govFee: 28300, desc: 'One-time border crossing', icon: 'üîô' },
            'cert-entry-exit': { name: 'Entry/Exit Certificate', price: 22000, govFee: 2000, desc: 'Travel history record', icon: 'üìã' },
            'cert-arc': { name: 'ARC Certificate', price: 22000, govFee: 2000, desc: 'Registration proof', icon: 'üìÑ' },
            'cert-residence': { name: 'Residence Certificate', price: 22000, govFee: 2000, desc: 'F-4 residence proof', icon: 'üè†' },
            'cert-realestate': { name: 'Real Estate Registration ID', price: 22000, govFee: 2000, desc: 'Property transaction', icon: 'üèòÔ∏è' },
            'cert-arc-number-change': { name: 'ARC Number Change Cert', price: 22000, govFee: 2000, desc: 'Number change confirmation', icon: 'üìã' },
            'cert-nationality': { name: 'Nationality Certificate', price: 22000, govFee: 2000, desc: 'Nationality status proof', icon: 'üìú' }
        };

        // Í∞ÄÍ≤© ÏúÑÎ≥ÄÏ°∞ Î∞©ÏßÄ: servicePricing Í∞ùÏ≤¥Î•º ÏôÑÏ†ÑÌûà ÎèôÍ≤∞
        Object.values(servicePricing).forEach(v => Object.freeze(v));
        Object.freeze(servicePricing);

        let selectedService = null;

        // Í≤∞Ï†ú Ïãú ÏõêÎ≥∏ Í∞ÄÍ≤©ÏùÑ Ïû¨Í≥ÑÏÇ∞ÌïòÏó¨ ÏúÑÎ≥ÄÏ°∞ Í≤ÄÏ¶ù
        function getVerifiedPrice(serviceId) {
            const original = servicePricing[serviceId];
            if (!original) return null;
            return {
                price: original.price,
                govFee: original.govFee || 0,
                totalPrice: original.price + (original.govFee || 0)
            };
        }

        function goBack() {
            const referrer = document.referrer;
            if (referrer && referrer.includes(window.location.host)) {
                window.location.href = referrer;
            } else {
                window.location.href = 'index.html';
            }
        }

        window.isAdminLoggedIn = function() {
            // Î≥¥Ïïà Í∞ïÌôî: sessionStorageÎßåÏúºÎ°úÎäî Î∂àÏ∂©Î∂Ñ - Supabase ÏÑ∏ÏÖò + role Í≤ÄÏ¶ù ÌïÑÏöî
            return sessionStorage.getItem('adminLoggedIn') === 'true' &&
                   sessionStorage.getItem('adminRole') &&
                   ['super_admin', 'admin', 'staff'].includes(sessionStorage.getItem('adminRole'));
        };

        // ÏÑúÎ≤Ñ Ï∏° Í¥ÄÎ¶¨Ïûê Í∂åÌïú Í≤ÄÏ¶ù
        async function verifyAdminRole() {
            const ADMIN_ROLES = ['super_admin', 'admin', 'staff'];
            try {
                const session = await checkSession();
                if (session && session.user) {
                    // 1) profiles ÌÖåÏù¥Î∏îÏóêÏÑú role ÌôïÏù∏
                    const { data: profile } = await supabaseClient
                        .from('profiles')
                        .select('role')
                        .eq('id', session.user.id)
                        .single();

                    if (profile && ADMIN_ROLES.includes(profile.role)) return true;

                    // 2) admins ÌÖåÏù¥Î∏îÏóêÏÑúÎèÑ ÌôïÏù∏ (Í¥ÄÎ¶¨Ïûê Ï†ÑÏö© ÌÖåÏù¥Î∏î)
                    const { data: admin } = await supabaseClient
                        .from('admins')
                        .select('role')
                        .eq('email', session.user.email)
                        .single();

                    if (admin && ADMIN_ROLES.includes(admin.role)) return true;
                }

                // 3) Supabase ÏÑ∏ÏÖò ÏóÜÎäî Í≤ΩÏö∞ sessionStorage Ìè¥Î∞± (admin-loginÏóêÏÑú ÏÑ§Ï†ï)
                if (sessionStorage.getItem('adminLoggedIn') === 'true' &&
                    ADMIN_ROLES.includes(sessionStorage.getItem('adminRole'))) {
                    return true;
                }

                return false;
            } catch (e) {
                // ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•ò Ïãú sessionStorage Ìè¥Î∞±
                if (sessionStorage.getItem('adminLoggedIn') === 'true' &&
                    ADMIN_ROLES.includes(sessionStorage.getItem('adminRole'))) {
                    return true;
                }
                return false;
            }
        }

        window.addEventListener('DOMContentLoaded', async function() {
            const urlParams = new URLSearchParams(window.location.search);
            // Î≥¥Ïïà ÏàòÏ†ï: URL ÌååÎùºÎØ∏ÌÑ∞ ?admin=true ÎßåÏúºÎ°úÎäî admin Î™®Îìú ÏßÑÏûÖ Î∂àÍ∞Ä
            // Î∞òÎìúÏãú ÏÑúÎ≤Ñ Ï∏° role Í≤ÄÏ¶ùÏùÑ Í±∞Ï≥êÏïº Ìï®
            let isAdminMode = false;

            if (urlParams.get('admin') === 'true' || window.isAdminLoggedIn()) {
                // ÏÑúÎ≤Ñ Ï∏°ÏóêÏÑú Ïã§Ï†ú Í¥ÄÎ¶¨Ïûê role Í≤ÄÏ¶ù
                isAdminMode = await verifyAdminRole();
                if (!isAdminMode) {
                    console.warn('Admin access denied: insufficient privileges');
                    // admin ÌååÎùºÎØ∏ÌÑ∞ Ï†úÍ±∞ÌïòÍ≥† ÏùºÎ∞ò ÏÇ¨Ïö©Ïûê ÌùêÎ¶ÑÏúºÎ°ú ÏßÑÌñâ
                    const cleanUrl = new URL(window.location.href);
                    cleanUrl.searchParams.delete('admin');
                    window.history.replaceState({}, '', cleanUrl.toString());
                }
            }

            if (isAdminMode) {
                try {
                    tossPayments = TossPayments(clientKey);
                } catch (error) {
                    console.error('Toss Payments init failed:', error);
                }

                const serviceId = urlParams.get('service');
                if (!serviceId || !servicePricing[serviceId]) {
                    alert(getUIMessage('invalidService'));
                    window.location.href = 'index.html';
                    return;
                }

                selectedService = { ...servicePricing[serviceId] };
                document.getElementById('loading').style.display = 'none';
                showContent(serviceId);

                // Í¥ÄÎ¶¨Ïûê Î™®Îìú: ÌÖåÏä§Ìä∏ Ïì∞Î†àÎìú Ïó¥Í∏∞ Î≤ÑÌäºÎßå Ï∂îÍ∞Ä ÌëúÏãú (ÎÇòÎ®∏ÏßÄ Í≤∞Ï†ú UIÎäî Í∑∏ÎåÄÎ°ú)
                document.getElementById('adminThreadBtn').style.display = 'flex';

                return;
            }

            let session = await checkSession();

            if (!session || !session.user) {
                await new Promise(resolve => setTimeout(resolve, 1000));
                session = await checkSession();
            }

            if (!session || !session.user) {
                const currentUrl = window.location.href;
                localStorage.setItem('redirectAfterLogin', currentUrl);

                if (confirm(getUIMessage('loginConfirm'))) {
                    await signInWithGoogle();
                }
                return;
            }

            try {
                tossPayments = TossPayments(clientKey);
                // Toss Payments initialized
            } catch (error) {
                console.error('‚ùå Toss Payments init failed:', error);
            }

            const serviceId = urlParams.get('service');

            if (!serviceId || !servicePricing[serviceId]) {
                alert(getUIMessage('invalidAccess'));
                window.history.back();
                return;
            }

            selectedService = { ...servicePricing[serviceId] };

            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                showContent(serviceId);
            }, 500);
        });

        function showContent(serviceId) {
            // ÌïúÍµ≠Ïñ¥Ïù∏ Í≤ΩÏö∞ nameKo, descKo ÏÇ¨Ïö©
            const isKorean = typeof i18n !== 'undefined' && i18n.currentLanguage === 'ko';
            const serviceName = (isKorean && selectedService.nameKo) ? selectedService.nameKo : selectedService.name;
            const serviceDesc = (isKorean && selectedService.descKo) ? selectedService.descKo : selectedService.desc;

            document.getElementById('service-name').textContent = serviceName;
            document.getElementById('service-desc').textContent = serviceDesc;

            // Set badge text
            const badgeText = document.getElementById('service-badge-text');
            if (badgeText) {
                badgeText.textContent = selectedService.badge || 'Visa Service';
            }

            if (selectedService.consulting) {
                // Consulting mode
                document.getElementById('price-card').style.display = 'none';
                document.getElementById('consulting-notice').style.display = 'flex';
                document.getElementById('service-badge').innerHTML = '<i class="fas fa-comments"></i><span>Consultation</span>';
                document.getElementById('service-badge').classList.add('consulting-badge');
                document.getElementById('btn-text').textContent = 'Request Quote';
                document.getElementById('payBtn').onclick = applyForConsulting;

                // Hide WISE button for consulting
                document.getElementById('wiseBtn').style.display = 'none';
            } else if (selectedService.deferredPayment) {
                // Deferred payment mode - show price but open thread instead of payment
                const agencyFee = selectedService.price;
                const govtFee = selectedService.govFee || 0;
                const totalPrice = agencyFee + govtFee;

                document.getElementById('agency-fee').textContent = '‚Ç©' + agencyFee.toLocaleString();

                if (govtFee > 0) {
                    document.getElementById('govt-fee-row').style.display = 'flex';
                    document.getElementById('govt-fee').textContent = '‚Ç©' + govtFee.toLocaleString();
                    document.getElementById('govt-notice').style.display = 'flex';
                }

                document.getElementById('total-price').textContent = '‚Ç©' + totalPrice.toLocaleString();
                document.getElementById('deferred-notice').style.display = 'flex';

                // Change button to open thread
                const btnText = document.getElementById('btn-text');
                btnText.setAttribute('data-i18n', 'serviceApply.openThread');
                btnText.textContent = typeof i18n !== 'undefined' ? i18n.translate('serviceApply.openThread') : 'Open Thread';
                document.getElementById('payBtn').onclick = applyForDeferredPayment;

                // Hide WISE button for deferred payment
                document.getElementById('wiseBtn').style.display = 'none';

                selectedService.totalPrice = totalPrice;
                selectedService.agencyFee = agencyFee;
                selectedService.govtFee = govtFee;
            } else {
                // Payment mode
                const agencyFee = selectedService.price;
                const govtFee = selectedService.govFee || 0;
                const totalPrice = agencyFee + govtFee;

                document.getElementById('agency-fee').textContent = '‚Ç©' + agencyFee.toLocaleString();

                if (govtFee > 0) {
                    document.getElementById('govt-fee-row').style.display = 'flex';
                    document.getElementById('govt-fee').textContent = '‚Ç©' + govtFee.toLocaleString();
                    document.getElementById('govt-notice').style.display = 'flex';
                }

                document.getElementById('total-price').textContent = '‚Ç©' + totalPrice.toLocaleString();

                selectedService.totalPrice = totalPrice;
                selectedService.agencyFee = agencyFee;
                selectedService.govtFee = govtFee;
            }

            // D-10-1 form is now submitted within the thread, not on payment page
            // Keep form hidden - users will fill it out in the thread after payment

            document.getElementById('main-content').style.display = 'grid';

            // Initialize consent text
            initServiceConsentText();
        }

        // Get D-10-1 form data
        function getD10FormData() {
            const form = document.getElementById('d10-1-form');
            if (!form || form.style.display === 'none') return null;

            const residenceProof = document.querySelector('input[name="d10-residence-proof"]:checked');
            const eVisaHistory = document.querySelector('input[name="d10-e-visa-history"]:checked');
            const internshipPlan = document.querySelector('input[name="d10-internship-plan"]:checked');

            return {
                currentVisa: document.getElementById('d10-current-visa').value,
                visaExpiry: document.getElementById('d10-visa-expiry').value,
                graduationDate: document.getElementById('d10-graduation-date').value,
                degreeType: document.getElementById('d10-degree-type').value,
                university: document.getElementById('d10-university').value,
                address: document.getElementById('d10-address').value,
                residenceProof: residenceProof ? residenceProof.value : '',
                koreanLevel: document.getElementById('d10-korean-level').value,
                eVisaHistory: eVisaHistory ? eVisaHistory.value : 'no',
                internshipPlan: internshipPlan ? internshipPlan.value : 'no',
                targetIndustry: document.getElementById('d10-target-industry').value,
                jobPlan: document.getElementById('d10-job-plan').value,
                additionalNotes: document.getElementById('d10-additional-notes').value
            };
        }

        // Validate D-10-1 form
        function validateD10Form() {
            const form = document.getElementById('d10-1-form');
            if (!form || form.style.display === 'none') return true;

            const requiredFields = [
                { id: 'd10-current-visa', name: 'Current Visa Status' },
                { id: 'd10-visa-expiry', name: 'Visa Expiry Date' },
                { id: 'd10-graduation-date', name: 'Graduation Date' },
                { id: 'd10-degree-type', name: 'Degree Type' },
                { id: 'd10-university', name: 'University Name' },
                { id: 'd10-address', name: 'Current Address' },
                { id: 'd10-target-industry', name: 'Target Industry' },
                { id: 'd10-job-plan', name: 'Job Seeking Plan' }
            ];

            for (const field of requiredFields) {
                const element = document.getElementById(field.id);
                if (!element || !element.value.trim()) {
                    alert(getUIMessage('fillInField', { field: field.name }));
                    element?.focus();
                    return false;
                }
            }

            // Check residence proof radio
            const residenceProof = document.querySelector('input[name="d10-residence-proof"]:checked');
            if (!residenceProof) {
                alert(getUIMessage('selectResidenceProof'));
                return false;
            }

            return true;
        }

        // Format D-10-1 data for thread message
        function formatD10DataForMessage(data) {
            if (!data) return '';

            const graduationDate = new Date(data.graduationDate);
            const today = new Date();
            const monthsSinceGraduation = Math.floor((today - graduationDate) / (1000 * 60 * 60 * 24 * 30));
            const isWithinOneYear = monthsSinceGraduation <= 12;

            return `
üìã **D-10-1 Application Details**

**Basic Eligibility:**
‚Ä¢ Current Visa: ${data.currentVisa}
‚Ä¢ Visa Expiry: ${data.visaExpiry}
‚Ä¢ Graduation Date: ${data.graduationDate} (${isWithinOneYear ? '‚úÖ Within 1 year - Points Exempt!' : '‚ö†Ô∏è Over 1 year - Points required'})
‚Ä¢ Degree: ${data.degreeType}
‚Ä¢ University: ${data.university}

**Residence:**
‚Ä¢ Address: ${data.address}
‚Ä¢ Proof Type: ${data.residenceProof}

**Korean & Work:**
‚Ä¢ Korean Level: ${data.koreanLevel || 'Not specified'}
‚Ä¢ Previous E-visa: ${data.eVisaHistory === 'yes' ? '‚ö†Ô∏è Yes - Part-time NOT allowed' : '‚úÖ No'}
‚Ä¢ Internship Plan: ${data.internshipPlan}

**Job Seeking Plan:**
‚Ä¢ Target Industry: ${data.targetIndustry}
‚Ä¢ Plan: ${data.jobPlan}

${data.additionalNotes ? `**Additional Notes:**\n${data.additionalNotes}` : ''}
`;
        }

        // API Í∞úÎ≥Ñ Ïó∞Îèô ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÌÇ§ (HTML <head>Ïùò __PAYMENT_CONFIG__ÏóêÏÑú Ï£ºÏûÖ)
        const clientKey = window.__PAYMENT_CONFIG__?.tossClientKey;
        // Consent checkbox handler
        function onServiceConsentChange() {
            const checked = document.getElementById('serviceConsentCheck').checked;
            const payBtn = document.getElementById('payBtn');
            const wiseBtn = document.getElementById('wiseBtn');
            if (payBtn) payBtn.disabled = !checked;
            if (wiseBtn) wiseBtn.disabled = !checked;
        }

        function initServiceConsentText() {
            const textEl = document.getElementById('serviceConsentText');
            if (textEl) {
                textEl.textContent = getUIMessage('serviceConsentLabel');
            }
        }

        function checkServiceConsent() {
            const check = document.getElementById('serviceConsentCheck');
            if (!check || !check.checked) {
                alert(getUIMessage('consentRequired'));
                return false;
            }
            return true;
        }

        let tossPayments = null;

        async function processPayment() {
            // Validate consent
            if (!checkServiceConsent()) return;

            // Validate D-10-1 form if applicable
            if (!validateD10Form()) {
                return;
            }

            const btn = document.getElementById('payBtn');
            btn.disabled = true;
            btn.classList.add('loading');
            document.getElementById('btn-text').innerHTML = '<i class="fas fa-spinner fa-spin"></i> ' + getUIMessage('processing');

            try {
                let profile = null;

                const session = await checkSession();
                if (!session || !session.user) {
                    alert(getUIMessage('loginRequired'));
                    window.location.href = 'index.html';
                    return;
                }

                const profileResult = await getUserProfile(session.user.id);
                if (profileResult.success && profileResult.data) {
                    profile = profileResult.data;
                } else {
                    profile = {
                        name: session.user.email.split('@')[0],
                        email: session.user.email,
                        phone: ''
                    };
                }

                // Get D-10-1 form data if applicable
                const d10Data = getD10FormData();

                // Í∞ÄÍ≤© ÏúÑÎ≥ÄÏ°∞ Î∞©ÏßÄ: ÏõêÎ≥∏ servicePricingÏóêÏÑú Í∞ÄÍ≤© Ïû¨Í≥ÑÏÇ∞
                const payServiceId = new URLSearchParams(window.location.search).get('service');
                const verified = getVerifiedPrice(payServiceId);
                if (!verified || verified.totalPrice !== selectedService.totalPrice) {
                    alert('Í≤∞Ï†ú Í∏àÏï° Í≤ÄÏ¶ù Ïã§Ìå®. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ® Ìï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }

                const orderInfo = {
                    orderId: 'ORD' + Date.now(),
                    orderName: selectedService.name,
                    amount: verified.totalPrice,
                    agencyFee: verified.price,
                    govtFee: verified.govFee,
                    customerName: profile.name || session.user.email,
                    customerEmail: profile.email || session.user.email,
                    customerPhone: profile.phone || '',
                    paymentMethod: 'card',
                    timestamp: new Date().toISOString()
                };

                // Get organization and lecture code from URL
                const paymentUrlParams = new URLSearchParams(window.location.search);
                const paymentOrg = paymentUrlParams.get('org') || selectedService.organization || 'general';
                const paymentLectureCode = paymentUrlParams.get('lectureCode') || sessionStorage.getItem('dhu_lecture_code') || '';

                sessionStorage.setItem('pendingPayment', JSON.stringify({
                    orderId: orderInfo.orderId,
                    serviceName: orderInfo.orderName,
                    amount: orderInfo.amount,
                    agencyFee: orderInfo.agencyFee,
                    govtFee: orderInfo.govtFee,
                    paymentMethod: orderInfo.paymentMethod,
                    customerName: orderInfo.customerName,
                    customerEmail: orderInfo.customerEmail,
                    d10FormData: d10Data,
                    d10FormattedMessage: d10Data ? formatD10DataForMessage(d10Data) : null,
                    organization: paymentOrg,
                    lectureCode: paymentLectureCode
                }));

                // Card payment with Toss
                if (!tossPayments) {
                    throw new Error('Payment system not initialized');
                }

                const currentUrl = window.location.origin;

                // v1 API Í∞úÎ≥Ñ Ïó∞Îèô Î∞©Ïãù
                const paymentRequest = {
                    amount: orderInfo.amount,
                    orderId: orderInfo.orderId,
                    orderName: orderInfo.orderName,
                    successUrl: currentUrl + '/payment-success.html',
                    failUrl: currentUrl + '/payment-fail.html',
                    customerEmail: orderInfo.customerEmail,
                    customerName: orderInfo.customerName
                };

                if (orderInfo.customerPhone && orderInfo.customerPhone.trim()) {
                    paymentRequest.customerMobilePhone = orderInfo.customerPhone.replace(/-/g, '');
                }

                await tossPayments.requestPayment('Ïπ¥Îìú', paymentRequest);

            } catch (error) {
                console.error('Payment error:', error);
                btn.disabled = false;
                btn.classList.remove('loading');
                document.getElementById('btn-text').textContent = 'Pay with Card';

                if (error.code === 'PAY_PROCESS_CANCELED') {
                    return;
                }

                alert(getUIMessage('paymentError'));
            }
        }

        // Í¥ÄÎ¶¨Ïûê ÌÖåÏä§Ìä∏Ïö©: Í≤∞Ï†ú ÏóÜÏù¥ Î∞îÎ°ú Ïì∞Î†àÎìú ÏÉùÏÑ±
        async function createAdminTestThread() {
            const btn = document.getElementById('payBtn');
            try {
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner"></i> Ïì∞Î†àÎìú ÏÉùÏÑ± Ï§ë...';

                // Supabase ÏÑ∏ÏÖò ÌôïÏù∏ (Ïù¥Î©îÏùº/ÎπÑÎ∞ÄÎ≤àÌò∏ ÎòêÎäî Google Î°úÍ∑∏Ïù∏)
                let session = await checkSession();
                if (!session || !session.user) {
                    // Í¥ÄÎ¶¨Ïûê ÏÑ∏ÏÖòÏù¥ ÎßåÎ£åÎêú Í≤ΩÏö∞ Ïû¨Î°úÍ∑∏Ïù∏ ÏïàÎÇ¥
                    alert('Í¥ÄÎ¶¨Ïûê ÏÑ∏ÏÖòÏù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
                    window.location.href = 'admin-login.html';
                    return;
                }

                // ÌîÑÎ°úÌïÑ ÌôïÏù∏/ÏÉùÏÑ±
                const profileResult = await getUserProfile(session.user.id);
                if (!profileResult.success || !profileResult.data) {
                    await createOrUpdateProfile(session.user.id, {
                        name: session.user.email.split('@')[0],
                        email: session.user.email,
                        phone: ''
                    });
                }

                const urlParams = new URLSearchParams(window.location.search);
                const organization = urlParams.get('org') || 'general';

                // Ïì∞Î†àÎìú ÏÉùÏÑ± (Í≤∞Ï†ú ÏôÑÎ£å ÏÉÅÌÉúÎ°ú)
                const threadResult = await createThread({
                    service_name: selectedService.name,
                    status: 'payment',
                    amount: selectedService.totalPrice,
                    government_fee: selectedService.govtFee || 0,
                    order_id: 'ADMIN-TEST-' + Date.now(),
                    organization: organization
                });

                if (!threadResult.success) {
                    throw new Error(threadResult.error || 'Ïì∞Î†àÎìú ÏÉùÏÑ± Ïã§Ìå®');
                }

                const threadId = threadResult.data.id;

                // ÌôòÏòÅ Î©îÏãúÏßÄ Ï†ÑÏÜ° (Ïã§Ìå®Ìï¥ÎèÑ Ïì∞Î†àÎìú Ïù¥ÎèôÏùÄ Í≥ÑÏÜç)
                try {
                    await createWelcomeMessage(threadId, selectedService.name);
                } catch (msgErr) {
                    console.error('Welcome message failed (non-blocking):', msgErr);
                }

                // D-10-1 Ìèº Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ Ï†ÑÏÜ° (Ïã§Ìå®Ìï¥ÎèÑ Ïì∞Î†àÎìú Ïù¥ÎèôÏùÄ Í≥ÑÏÜç)
                try {
                    const d10Data = getD10FormData();
                    if (d10Data) {
                        const d10Msg = formatD10DataForMessage(d10Data);
                        if (d10Msg) {
                            const profile = await getUserProfile(session.user.id);
                            await supabaseClient.from('messages').insert({
                                thread_id: threadId,
                                sender_id: session.user.id,
                                sender_type: 'user',
                                sender_name: profile?.data?.name || session.user.email.split('@')[0],
                                content: d10Msg
                            });
                        }
                    }
                } catch (d10Err) {
                    console.error('D-10-1 form message failed (non-blocking):', d10Err);
                }

                // Ïì∞Î†àÎìúÎ°ú Î∞îÎ°ú Ïù¥Îèô
                window.location.href = `thread-general-v2.html?id=${threadId}`;

            } catch (error) {
                console.error('Admin test thread creation error:', error);
                alert('Ïì∞Î†àÎìú ÏÉùÏÑ± Ïã§Ìå®: ' + error.message);
                btn.disabled = false;
                btn.innerHTML = '<span id="btn-text">Ïπ¥Îìú Í≤∞Ï†úÌïòÍ∏∞</span>';
            }
        }

        // WISE Í≤∞Ï†ú ÎßÅÌÅ¨ (Í∏àÏï°Î≥Ñ)
        const wisePaymentLinks = {
            24000: 'https://wise.com/pay/r/1IF6cGVkIsF9Phs',
            33000: 'https://wise.com/pay/r/ThTuo2OBnRXSNzA',
            55000: 'https://wise.com/pay/r/i7KO0SXvaD2VKx0',
            83300: 'https://wise.com/pay/r/3cpuwd5jgDJvRWI',
            96300: 'https://wise.com/pay/r/xm5CL2eyBlhEUPo',
            110000: 'https://wise.com/pay/r/ck3gsRVGWcZpoeE',
            130000: 'https://wise.com/pay/r/hXGMfv9e6L2dg78',
            140000: 'https://wise.com/pay/r/PkdBQb9xgn4SOLM',
            145000: 'https://wise.com/pay/r/Y1MSgycmIZMV4MU',
            155000: 'https://wise.com/pay/r/b8AvUz6dY-91T4c',
            160000: 'https://wise.com/pay/r/qHAyX6cHMWRdVls',
            170000: 'https://wise.com/pay/r/ev-p0-QK7Uymogo',
            220000: 'https://wise.com/pay/r/TfzM0z6uzy90szg',
            229000: 'https://wise.com/pay/r/EbYeYimivPXNvIs',
            260000: 'https://wise.com/pay/r/I09u0zn6y1dlMkw',
            280000: 'https://wise.com/pay/r/fpxp4Ko0ttWuS5g',
            300000: 'https://wise.com/pay/r/TdxN_6ncwsAW460',
            319000: 'https://wise.com/pay/r/gOlOHagrUvwG6zs',
            320000: 'https://wise.com/pay/r/-CjjhEWULXbz0rk',
            330000: 'https://wise.com/pay/r/84ApB3e-b9aCpPk',
            339000: 'https://wise.com/pay/r/4qzd0KQCWf3o-Ls',
            340000: 'https://wise.com/pay/r/tdJ55UOW4bOEQlU',
            390000: 'https://wise.com/pay/r/I5OTBday1hGlEMs',
            430000: 'https://wise.com/pay/r/MST3-o_g9BBc1d8',
            610000: 'https://wise.com/pay/r/cjgZCYNgy0agO24',
            650000: 'https://wise.com/pay/r/LtBfptW0Uo6loss',
            669000: 'https://wise.com/pay/r/7nzDH3XWRbw-ty8',
            750000: 'https://wise.com/pay/r/NyVuEVRRg0Dcnzw',
            1200000: 'https://wise.com/pay/r/xaC-lXmieWY_O50',
            1300000: 'https://wise.com/pay/r/tEFm5TAgSAzHHF0',
            1400000: 'https://wise.com/pay/r/3Z1Ac7naWvLabmw'
        };

        // WISE Í≤∞Ï†ú Ï≤òÎ¶¨
        async function processWisePayment() {
            // Validate consent
            if (!checkServiceConsent()) return;

            // ÌòÑÏû¨ Î°úÍ∑∏Ïù∏ ÏÇ¨Ïö©Ïûê ÌôïÏù∏
            const session = await checkSession();
            if (!session || !session.user) {
                const currentUrl = window.location.href;
                localStorage.setItem('redirectAfterLogin', currentUrl);

                if (confirm(getUIMessage('loginConfirm'))) {
                    await signInWithGoogle();
                }
                return;
            }

            // Ï£ºÎ¨∏ Ï†ïÎ≥¥ ÏÉùÏÑ±
            const orderId = 'WISE-' + Date.now();
            const amount = selectedService.totalPrice;
            const serviceName = selectedService.name;
            const wiseLink = wisePaymentLinks[amount] || null;

            if (!wiseLink) {
                alert(getUIMessage('wiseLinkNotFound'));
                return;
            }

            // WISE Í≤∞Ï†ú Î™®Îã¨ ÌëúÏãú
            showWisePaymentModal({
                orderId: orderId,
                serviceName: serviceName,
                amount: amount,
                customerEmail: session.user.email,
                wiseLink: wiseLink
            });
        }

        // WISE Í≤∞Ï†ú Î™®Îã¨ ÌëúÏãú
        function showWisePaymentModal(orderInfo) {
            // Í∏∞Ï°¥ Î™®Îã¨Ïù¥ ÏûàÏúºÎ©¥ Ï†úÍ±∞
            const existingModal = document.getElementById('wisePaymentModal');
            if (existingModal) {
                existingModal.remove();
            }

            const modal = document.createElement('div');
            modal.id = 'wisePaymentModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
            `;

            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 20px;
                    max-width: 480px;
                    width: 100%;
                    padding: 32px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                ">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="
                            width: 64px;
                            height: 64px;
                            background: linear-gradient(135deg, #9FE870 0%, #7DD957 100%);
                            border-radius: 16px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            margin: 0 auto 16px;
                        ">
                            <span style="font-size: 28px; font-weight: bold; color: #1A1A1A;">W</span>
                        </div>
                        <h2 style="font-size: 22px; font-weight: 800; color: #1A1A1A; margin: 0;">${getUIMessage('wiseTitle')}</h2>
                    </div>

                    <div style="
                        background: #F8FAFC;
                        border-radius: 12px;
                        padding: 20px;
                        margin-bottom: 24px;
                    ">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: #6B7280; font-size: 14px;">${getUIMessage('wiseServiceLabel')}</span>
                            <span style="font-weight: 600; color: #1A1A1A; font-size: 14px;">${orderInfo.serviceName}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: #6B7280; font-size: 14px;">${getUIMessage('wiseOrderLabel')}</span>
                            <span style="font-weight: 600; color: #1A1A1A; font-size: 14px;">${orderInfo.orderId}</span>
                        </div>
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            padding-top: 12px;
                            border-top: 1px solid #E5E7EB;
                        ">
                            <span style="color: #1A1A1A; font-weight: 700;">${getUIMessage('wiseAmountLabel')}</span>
                            <span style="font-weight: 800; color: #059669; font-size: 20px;">‚Ç©${orderInfo.amount.toLocaleString()}</span>
                        </div>
                    </div>

                    <div style="
                        background: #ECFDF5;
                        border: 1px solid #A7F3D0;
                        border-radius: 12px;
                        padding: 16px;
                        margin-bottom: 24px;
                    ">
                        <p style="color: #065F46; font-size: 14px; margin: 0; line-height: 1.6;">
                            <strong>${getUIMessage('wiseInstructions')}:</strong><br>
                            ${getUIMessage('wiseInstruction1')}<br><br>
                            ${getUIMessage('wiseInstruction2')}
                        </p>
                    </div>

                    <a href="${orderInfo.wiseLink}" target="_blank" style="
                        display: block;
                        width: 100%;
                        height: 56px;
                        background: linear-gradient(135deg, #9FE870 0%, #7DD957 100%);
                        color: #1A1A1A;
                        border: none;
                        border-radius: 14px;
                        font-size: 17px;
                        font-weight: 700;
                        cursor: pointer;
                        text-decoration: none;
                        text-align: center;
                        line-height: 56px;
                        box-shadow: 0 4px 16px rgba(159, 232, 112, 0.3);
                    ">
                        ${getUIMessage('wisePayBtn')}
                    </a>

                    <button onclick="document.getElementById('wisePaymentModal').remove()" style="
                        width: 100%;
                        height: 48px;
                        background: transparent;
                        color: #6B7280;
                        border: 1px solid #E5E7EB;
                        border-radius: 12px;
                        font-size: 15px;
                        font-weight: 600;
                        cursor: pointer;
                        margin-top: 12px;
                    ">
                        ${getUIMessage('wiseClose')}
                    </button>
                </div>
            `;

            document.body.appendChild(modal);

            // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Get welcome message in user's selected language
        function getWelcomeMessage() {
            const lang = localStorage.getItem('i18n_language') || 'en';

            const messages = {
                ko: `ÏïàÎÖïÌïòÏÑ∏Ïöî! Î≤ïÎ¨¥Î≤ïÏù∏ Î°úÏó∞ Ï∂úÏûÖÍµ≠Ïù¥ÎØºÏßÄÏõêÏÑºÌÑ∞ÏûÖÎãàÎã§.

ÎπÑÏûê ÏûêÎ¨∏ ÏÑúÎπÑÏä§ Ïã†Ï≤≠Ïù¥ Ï†ëÏàòÎêòÏóàÏäµÎãàÎã§.
Ï†ïÌôïÌïú ÏûêÎ¨∏ÏùÑ ÏúÑÌï¥ ÏïÑÎûò Ï†ïÎ≥¥Î•º Ï†úÏ∂úÌï¥ Ï£ºÏÑ∏Ïöî.

‚ñ† Í∏∞Î≥∏ÏÇ¨Ìï≠ Ï†úÏ∂ú
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">Í∏∞Î≥∏ÏÇ¨Ìï≠ ÏûÖÎ†•ÌïòÍ∏∞</a>

‚ñ† ÏûêÎ¨∏ ÏöîÏ≤≠ ÏÇ¨Ìï≠
ÌòÑÏû¨ ÏÉÅÌô©Í≥º Í∂ÅÍ∏àÌïòÏã† Ï†êÏùÑ ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±Ìï¥ Ï£ºÏÑ∏Ïöî.

ÏòàÏãú:
- ÎπÑÏûê Î≥ÄÍ≤Ω ÏòàÏ†ï
- ÏòÅÏ£ºÍ∂å ÎòêÎäî Í∞ÄÏ°± Ï¥àÏ≤≠
- ÌöåÏÇ¨ Í¥ÄÎ†® ÎπÑÏûê Î¨∏Ï†ú
- Íµ≠Ï†Å Ï∑®Îìù Í¥ÄÎ†®
- Ï∂úÏûÖÍµ≠ Î≤îÏπôÍ∏à ÎòêÎäî ÌòïÏÇ¨ ÏÇ¨Í±¥

Îã¥ÎãπÏûêÍ∞Ä ÌôïÏù∏ ÌõÑ ÏûêÎ¨∏ ÌïÑÏöî ÏÑúÎ•òÎ•º ÏïàÎÇ¥ÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.
Í∞êÏÇ¨Ìï©ÎãàÎã§.`,

                en: `Hello! This is Lawyeon Immigration Center.

Your visa consultation request has been received.
Please submit the following information for accurate consultation.

‚ñ† Basic Information
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">Enter Basic Information</a>

‚ñ† Consultation Request
Please describe your current situation and any questions you have.

Examples:
- Planning to change visa
- Permanent residence or family invitation
- Company-related visa issues
- Nationality acquisition
- Immigration fines or criminal cases

Our staff will review and guide you on the required documents.
Thank you.`,

                zh: `ÊÇ®Â•ΩÔºÅËøôÈáåÊòØÂæãÊ∏äÂá∫ÂÖ•Â¢ÉÁßªÊ∞ëÊîØÊè¥‰∏≠ÂøÉ„ÄÇ

ÊÇ®ÁöÑÁ≠æËØÅÂí®ËØ¢Áî≥ËØ∑Â∑≤Êî∂Âà∞„ÄÇ
‰∏∫‰∫ÜÂáÜÁ°ÆÂí®ËØ¢ÔºåËØ∑Êèê‰∫§‰ª•‰∏ã‰ø°ÊÅØ„ÄÇ

‚ñ† Âü∫Êú¨‰ø°ÊÅØÊèê‰∫§
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">Â°´ÂÜôÂü∫Êú¨‰ø°ÊÅØ</a>

‚ñ† Âí®ËØ¢ÂÜÖÂÆπ
ËØ∑Ëá™Áî±ÊèèËø∞ÊÇ®ÁöÑÂΩìÂâçÊÉÖÂÜµÂíåÁñëÈóÆ„ÄÇ

Á§∫‰æãÔºö
- ËÆ°ÂàíÂèòÊõ¥Á≠æËØÅ
- Ê∞∏‰πÖÂ±ÖÁïôÊùÉÊàñÂÆ∂Â∫≠ÈÇÄËØ∑
- ÂÖ¨Âè∏Áõ∏ÂÖ≥Á≠æËØÅÈóÆÈ¢ò
- ÂõΩÁ±çÂèñÂæóÁõ∏ÂÖ≥
- Âá∫ÂÖ•Â¢ÉÁΩöÊ¨æÊàñÂàë‰∫ãÊ°à‰ª∂

Â∑•‰Ωú‰∫∫ÂëòÁ°ÆËÆ§ÂêéÂ∞Ü‰∏∫ÊÇ®ÊåáÂØºÊâÄÈúÄÊñá‰ª∂„ÄÇ
Ë∞¢Ë∞¢„ÄÇ`,

                vi: `Xin chao! Day la Trung tam Ho tro Di tru Lawyeon.

Yeu cau tu van visa cua ban da duoc tiep nhan.
Vui long cung cap thong tin sau de duoc tu van chinh xac.

‚ñ† Thong tin co ban
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">Nhap thong tin co ban</a>

‚ñ† Noi dung tu van
Vui long mo ta tinh huong hien tai va cac thac mac cua ban.

Vi du:
- Du dinh doi visa
- Thuong tru hoac moi gia dinh
- Van de visa lien quan den cong ty
- Nhap quoc tich
- Phat vi pham xuat nhap canh hoac vu an hinh su

Nhan vien se xem xet va huong dan ban ve cac tai lieu can thiet.
Cam on.`,

                ja: `„Åì„Çì„Å´„Å°„ÅØÔºÅ„É≠„É®„É≥Âá∫ÂÖ•ÂõΩÁßªÊ∞ëÊîØÊè¥„Çª„É≥„Çø„Éº„Åß„Åô„ÄÇ

„Éì„Ç∂Áõ∏Ë´á„ÅÆÁî≥Ë´ã„ÅåÂèó„Åë‰ªò„Åë„Çâ„Çå„Åæ„Åó„Åü„ÄÇ
Ê≠£Á¢∫„Å™Áõ∏Ë´á„ÅÆ„Åü„ÇÅ„ÄÅ‰ª•‰∏ã„ÅÆÊÉÖÂ†±„Çí„ÅîÊèêÂá∫„Åè„Å†„Åï„ÅÑ„ÄÇ

‚ñ† Âü∫Êú¨ÊÉÖÂ†±„ÅÆÊèêÂá∫
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">Âü∫Êú¨ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åô„Çã</a>

‚ñ† Áõ∏Ë´áÂÜÖÂÆπ
ÁèæÂú®„ÅÆÁä∂Ê≥Å„Å®„ÅîË≥™Âïè„ÇíËá™Áî±„Å´„ÅäÊõ∏„Åç„Åè„Å†„Åï„ÅÑ„ÄÇ

‰æãÔºö
- „Éì„Ç∂Â§âÊõ¥‰∫àÂÆö
- Ê∞∏‰ΩèÊ®©„Åæ„Åü„ÅØÂÆ∂ÊóèÊãõÂæÖ
- ‰ºöÁ§æÈñ¢ÈÄ£„ÅÆ„Éì„Ç∂ÂïèÈ°å
- ÂõΩÁ±çÂèñÂæóÈñ¢ÈÄ£
- Âá∫ÂÖ•ÂõΩ„ÅÆÁΩ∞Èáë„Åæ„Åü„ÅØÂàë‰∫ã‰∫ã‰ª∂

ÊãÖÂΩìËÄÖ„ÅåÁ¢∫Ë™çÂæå„ÄÅÂøÖË¶ÅÊõ∏È°û„Çí„ÅîÊ°àÂÜÖ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ
„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ`,

                mn: `–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É! Lawyeon –¶–∞–≥–∞–∞—á–ª–∞–ª—ã–Ω —Ç”©–≤ –±–∞–π–Ω–∞.

–í–∏–∑–∏–π–Ω –∑”©–≤–ª”©–≥”©”©–Ω–∏–π —Ö“Ø—Å—ç–ª—Ç —Ö“Ø–ª—ç—ç–Ω –∞–≤–ª–∞–∞.
–ó”©–≤ –∑”©–≤–ª”©–≥”©”© –∞–≤–∞—Ö—ã–Ω —Ç—É–ª–¥ –¥–∞—Ä–∞–∞—Ö –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –∏–ª–≥—ç—ç–Ω—ç “Ø“Ø.

‚ñ† “Æ–Ω–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª—ç–ª
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">“Æ–Ω–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª—ç–ª –æ—Ä—É—É–ª–∞—Ö</a>

‚ñ† –ó”©–≤–ª”©–≥”©”©–Ω–∏–π –∞–≥—É—É–ª–≥–∞
–û–¥–æ–æ–≥–∏–π–Ω –Ω”©—Ö—Ü”©–ª –±–∞–π–¥–∞–ª, –∞—Å—É—É–ª—Ç–∞–∞ —á”©–ª”©”©—Ç—ç–π –±–∏—á–Ω—ç “Ø“Ø.

–ñ–∏—à—ç—ç:
- –í–∏–∑ —Å–æ–ª–∏—Ö —Ç”©–ª”©–≤–ª”©–≥”©”©—Ç—ç–π
- –ë–∞–π–Ω–≥—ã–Ω –æ—Ä—à–∏–Ω —Å—É—É—Ö —ç—Ä—Ö —ç—Å–≤—ç–ª –≥—ç—Ä –±“Ø–ª–∏–π–Ω —É—Ä–∏–ª–≥–∞
- –ö–æ–º–ø–∞–Ω–∏–π–Ω –≤–∏–∑—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª
- –ò—Ä–≥—ç–Ω—à–∏–ª –∞–≤–∞—Ö
- –û—Ä–æ—Ö –≥–∞—Ä–∞—Ö —Ç–æ—Ä–≥—É—É–ª—å —ç—Å–≤—ç–ª —ç—Ä“Ø“Ø–≥–∏–π–Ω —Ö—ç—Ä—ç–≥

–ê–∂–∏–ª—Ç–∞–Ω —à–∞–ª–≥–∞–∂, —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –±–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç—ã–≥ –∑–∞–∞–≤–∞—Ä—á–∏–ª–Ω–∞.
–ë–∞—è—Ä–ª–∞–ª–∞–∞.`,

                th: `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á Lawyeon

‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ß‡∏µ‡∏ã‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

‚ñ† ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
<a href="profile-setup.html" target="_blank" style="color: #3182F6; font-weight: 600;">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</a>

‚ñ† ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
- ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏µ‡∏ã‡πà‡∏≤
- ‡∏ñ‡∏¥‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ñ‡∏≤‡∏ß‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ä‡∏¥‡∏ç‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß
- ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ß‡∏µ‡∏ã‡πà‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
- ‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏¥
- ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏î‡∏µ‡∏≠‡∏≤‡∏ç‡∏≤

‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞`
            };

            return messages[lang] || messages.en;
        }

        // Get sender name in user's selected language
        function getSenderName() {
            const lang = localStorage.getItem('i18n_language') || 'en';
            const names = {
                ko: 'Î≤ïÎ¨¥Î≤ïÏù∏ Î°úÏó∞',
                en: 'Lawyeon Law Firm',
                zh: 'ÂæãÊ∏äÂæãÂ∏à‰∫ãÂä°ÊâÄ',
                vi: 'Cong ty Luat Lawyeon',
                ja: '„É≠„É®„É≥Ê≥ïÂæã‰∫ãÂãôÊâÄ',
                mn: 'Lawyeon –•—É—É–ª–∏–π–Ω –§–∏—Ä–º',
                th: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ Lawyeon'
            };
            return names[lang] || names.en;
        }

        // Get UI messages in user's selected language
        function getUIMessage(key, params = {}) {
            const lang = localStorage.getItem('i18n_language') || 'en';
            const messages = {
                loginRequired: {
                    ko: 'Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.',
                    en: 'Login required.',
                    zh: 'ÈúÄË¶ÅÁôªÂΩï„ÄÇ',
                    vi: 'Can dang nhap.',
                    ja: '„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ',
                    mn: '–ù—ç–≤—Ç—Ä—ç—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π.',
                    th: '‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'
                },
                loginConfirm: {
                    ko: 'Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\n\nGoogle Í≥ÑÏ†ïÏúºÎ°ú Î°úÍ∑∏Ïù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
                    en: 'Login required.\n\nSign in with Google?',
                    zh: 'ÈúÄË¶ÅÁôªÂΩï„ÄÇ\n\n‰ΩøÁî®GoogleË¥¶Êà∑ÁôªÂΩïÔºü',
                    vi: 'Can dang nhap.\n\nDang nhap bang Google?',
                    ja: '„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ\n\nGoogle„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åô„ÅãÔºü',
                    mn: '–ù—ç–≤—Ç—Ä—ç—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π.\n\nGoogle-—ç—ç—Ä –Ω—ç–≤—Ç—Ä—ç—Ö “Ø“Ø?',
                    th: '‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö\n\n‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google?'
                },
                openingThread: {
                    ko: 'Ïì∞Î†àÎìú Ïó¥Îäî Ï§ë...',
                    en: 'Opening Thread...',
                    zh: 'Ê≠£Âú®ÊâìÂºÄÁ∫øÁ®ã...',
                    vi: 'Dang mo chuoi...',
                    ja: '„Çπ„É¨„ÉÉ„Éâ„ÇíÈñã„ÅÑ„Å¶„ÅÑ„Åæ„Åô...',
                    mn: '–ù—ç—ç–∂ –±–∞–π–Ω–∞...',
                    th: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ò‡∏£‡∏î...'
                },
                processing: {
                    ko: 'Ï≤òÎ¶¨ Ï§ë...',
                    en: 'Processing...',
                    zh: 'Â§ÑÁêÜ‰∏≠...',
                    vi: 'Dang xu ly...',
                    ja: 'Âá¶ÁêÜ‰∏≠...',
                    mn: '–ë–æ–ª–æ–≤—Å—Ä—É—É–ª–∂ –±–∞–π–Ω–∞...',
                    th: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...'
                },
                submitting: {
                    ko: 'Ï†úÏ∂ú Ï§ë...',
                    en: 'Submitting...',
                    zh: 'Êèê‰∫§‰∏≠...',
                    vi: 'Dang gui...',
                    ja: 'ÈÄÅ‰ø°‰∏≠...',
                    mn: '–ò–ª–≥—ç—ç–∂ –±–∞–π–Ω–∞...',
                    th: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...'
                },
                threadCreated: {
                    ko: 'Ïì∞Î†àÎìúÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!\n\nÎã¥ÎãπÏûêÏôÄ ÏÉÅÎã¥ ÌõÑ ‚Ç©{amount} Í≤∞Ï†úÍ∞Ä ÏïàÎÇ¥Îê©ÎãàÎã§.',
                    en: 'Your thread has been created!\n\nPayment of ‚Ç©{amount} will be requested after consultation with our specialist.',
                    zh: 'ÊÇ®ÁöÑÁ∫øÁ®ãÂ∑≤ÂàõÂª∫ÔºÅ\n\n‰∏é‰∏ìÂëòÂí®ËØ¢ÂêéÂ∞ÜÊî∂Âèñ ‚Ç©{amount} ÁöÑË¥πÁî®„ÄÇ',
                    vi: 'Chuoi cua ban da duoc tao!\n\nSau khi tu van voi chuyen gia, ban se duoc yeu cau thanh toan ‚Ç©{amount}.',
                    ja: '„Çπ„É¨„ÉÉ„Éâ„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åó„ÅüÔºÅ\n\nÊãÖÂΩìËÄÖ„Å®„ÅÆÁõ∏Ë´áÂæå„ÄÅ‚Ç©{amount}„ÅÆÊ±∫Ê∏à„Çí„ÅîÊ°àÂÜÖ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                    mn: '–¢–∞–Ω—ã —Ö“Ø—Å—ç–ª—Ç –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!\n\n–ú—ç—Ä–≥—ç–∂–∏–ª—Ç—ç–Ω—Ç—ç–π –∑”©–≤–ª”©–ª–¥—Å”©–Ω–∏–π –¥–∞—Ä–∞–∞ ‚Ç©{amount} —Ç”©–ª–±”©—Ä —Ö“Ø—Å—ç—Ö –±–æ–ª–Ω–æ.',
                    th: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ò‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‚Ç©{amount}'
                },
                threadCreatedConsultFirst: {
                    ko: 'Ïì∞Î†àÎìúÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!\n\nÎã¥ÎãπÏûêÏôÄ ÏÉÅÎã¥ ÌõÑ Í≤∞Ï†úÍ∞Ä ÏïàÎÇ¥Îê©ÎãàÎã§.',
                    en: 'Your thread has been created!\n\nPayment details will be provided after consultation with our specialist.',
                    zh: 'ÊÇ®ÁöÑÁ∫øÁ®ãÂ∑≤ÂàõÂª∫ÔºÅ\n\n‰∏é‰∏ìÂëòÂí®ËØ¢ÂêéÂ∞ÜÊèê‰æõ‰ªòÊ¨æËØ¶ÊÉÖ„ÄÇ',
                    vi: 'Chuoi cua ban da duoc tao!\n\nChi tiet thanh toan se duoc cung cap sau khi tu van.',
                    ja: '„Çπ„É¨„ÉÉ„Éâ„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åó„ÅüÔºÅ\n\nÊãÖÂΩìËÄÖ„Å®„ÅÆÁõ∏Ë´áÂæå„ÄÅ„ÅäÊîØÊâï„ÅÑ„Çí„ÅîÊ°àÂÜÖ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                    mn: '–¢–∞–Ω—ã —Ö“Ø—Å—ç–ª—Ç –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!\n\n–ú—ç—Ä–≥—ç–∂–∏–ª—Ç—ç–Ω—Ç—ç–π –∑”©–≤–ª”©–ª–¥—Å”©–Ω–∏–π –¥–∞—Ä–∞–∞ —Ç”©–ª–±”©—Ä–∏–π–≥ –º—ç–¥—ç–≥–¥—ç–Ω—ç.',
                    th: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ò‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç'
                },
                quoteSubmitted: {
                    ko: 'Í≤¨Ï†Å ÏöîÏ≤≠Ïù¥ Ï†úÏ∂úÎêòÏóàÏäµÎãàÎã§!\n\nÎã¥ÎãπÏûêÍ∞Ä Í≥ß Ï†ÑÏö© Ïì∞Î†àÎìúÎ•º ÌÜµÌï¥ Ïó∞ÎùΩÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.',
                    en: 'Quote request submitted!\n\nOur specialist will contact you shortly through your dedicated thread.',
                    zh: 'Êä•‰ª∑ËØ∑Ê±ÇÂ∑≤Êèê‰∫§ÔºÅ\n\nÊàë‰ª¨ÁöÑ‰∏ìÂëòÂ∞ÜÈÄöËøáÊÇ®ÁöÑ‰∏ìÁî®Á∫øÁ®ã‰∏éÊÇ®ËÅîÁ≥ª„ÄÇ',
                    vi: 'Yeu cau bao gia da gui!\n\nChuyen gia cua chung toi se lien he voi ban qua chuoi rieng.',
                    ja: 'Ë¶ãÁ©ç„ÇÇ„Çä‰æùÈ†º„ÅåÈÄÅ‰ø°„Åï„Çå„Åæ„Åó„ÅüÔºÅ\n\nÊãÖÂΩìËÄÖ„ÅåÂ∞ÇÁî®„Çπ„É¨„ÉÉ„Éâ„ÇíÈÄö„Åò„Å¶„ÅîÈÄ£Áµ°„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                    mn: '“Æ–Ω–∏–π–Ω —Å–∞–Ω–∞–ª –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!\n\n–ú—ç—Ä–≥—ç–∂–∏–ª—Ç—ç–Ω —Ç–∞–Ω—ã —Ö“Ø—Å—ç–ª—Ç–∏–π–≥ —Ö—è–Ω–∞–∂ —É–¥–∞—Ö–≥“Ø–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω–æ.',
                    th: '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ò‡∏£‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ'
                },
                errorOccurred: {
                    ko: 'Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
                    en: 'An error occurred. Please try again.',
                    zh: 'ÂèëÁîüÈîôËØØÔºåËØ∑ÈáçËØï„ÄÇ',
                    vi: 'Da xay ra loi. Vui long thu lai.',
                    ja: '„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    mn: '–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞. –î–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É.',
                    th: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà'
                },
                paymentError: {
                    ko: 'Í≤∞Ï†ú Ï≤òÎ¶¨ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
                    en: 'Payment processing error. Please try again.',
                    zh: 'ÊîØ‰ªòÂ§ÑÁêÜÈîôËØØÔºåËØ∑ÈáçËØï„ÄÇ',
                    vi: 'Loi xu ly thanh toan. Vui long thu lai.',
                    ja: 'Ê±∫Ê∏àÂá¶ÁêÜ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    mn: '–¢”©–ª–±”©—Ä–∏–π–Ω –∞–ª–¥–∞–∞. –î–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É.',
                    th: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà'
                },
                invalidService: {
                    ko: 'Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÏÑúÎπÑÏä§ÏûÖÎãàÎã§.',
                    en: 'Invalid service.',
                    zh: 'Êó†ÊïàÁöÑÊúçÂä°„ÄÇ',
                    vi: 'Dich vu khong hop le.',
                    ja: 'ÁÑ°Âäπ„Å™„Çµ„Éº„Éì„Çπ„Åß„Åô„ÄÇ',
                    mn: '“Æ–π–ª—á–∏–ª–≥—ç—ç –±—É—Ä—É—É –±–∞–π–Ω–∞.',
                    th: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'
                },
                invalidAccess: {
                    ko: 'ÏûòÎ™ªÎêú Ï†ëÍ∑ºÏûÖÎãàÎã§.',
                    en: 'Invalid access.',
                    zh: 'Êó†ÊïàËÆøÈóÆ„ÄÇ',
                    vi: 'Truy cap khong hop le.',
                    ja: 'ÁÑ°Âäπ„Å™„Ç¢„ÇØ„Çª„Çπ„Åß„Åô„ÄÇ',
                    mn: '–•“Ø—á–∏–Ω–≥“Ø–π —Ö–∞–Ω–¥–∞–ª—Ç.',
                    th: '‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'
                },
                consentRequired: {
                    ko: 'ÏÑúÎπÑÏä§ Ïã†Ï≤≠ÏùÑ ÏúÑÌï¥ Ïù¥Ïö©ÏïΩÍ¥Ä Î∞è Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ®Ïóê ÎèôÏùòÌï¥ Ï£ºÏÑ∏Ïöî.',
                    en: 'Please agree to the Terms of Service and Privacy Policy to proceed.',
                    zh: 'ËØ∑ÂêåÊÑèÊúçÂä°Êù°Ê¨æÂíåÈöêÁßÅÊîøÁ≠ñÂêéÂÜçÁªßÁª≠„ÄÇ',
                    vi: 'Vui long dong y voi Dieu khoan va Chinh sach bao mat de tiep tuc.',
                    ja: 'Âà©Áî®Ë¶èÁ¥Ñ„Å®„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„Å´ÂêåÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    mn: '“Æ–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –Ω”©—Ö—Ü”©–ª –±–æ–ª–æ–Ω –ù—É—É—Ü–ª–∞–ª—ã–Ω –±–æ–¥–ª–æ–≥—ã–≥ –∑”©–≤—à”©”©—Ä–Ω”© “Ø“Ø.',
                    th: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß'
                },
                serviceConsentLabel: {
                    ko: 'ÏÑúÎπÑÏä§ Ïù¥Ïö©ÏïΩÍ¥Ä Î∞è Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ®Ïóê ÎèôÏùòÌï©ÎãàÎã§. Ï∂úÏûÖÍµ≠ ÎØºÏõê ÎåÄÌñâ ÏúÑÏûÑÏóê ÎèôÏùòÌïòÎ©∞, Í∞úÏù∏Ï†ïÎ≥¥Í∞Ä Î≤ïÎ¨¥Î∂Ä Ï∂úÏûÖÍµ≠¬∑Ïô∏Íµ≠Ïù∏Ï†ïÏ±ÖÎ≥∏Î∂ÄÏóê Ï†úÍ≥µÎê† Ïàò ÏûàÏùåÏùÑ ÌôïÏù∏Ìï©ÎãàÎã§.',
                    en: 'I agree to the Terms of Service and Privacy Policy. I consent to the delegation of immigration civil affairs and acknowledge that my personal information may be provided to the Ministry of Justice.',
                    zh: 'ÊàëÂêåÊÑèÊúçÂä°Êù°Ê¨æÂíåÈöêÁßÅÊîøÁ≠ñ„ÄÇÊàëÂêåÊÑèÂßîÊâòÂäûÁêÜÂá∫ÂÖ•Â¢É‰∫ãÂä°ÔºåÂπ∂Á°ÆËÆ§ÊàëÁöÑ‰∏™‰∫∫‰ø°ÊÅØÂèØËÉΩ‰ºöÊèê‰æõÁªôÊ≥ïÂä°ÈÉ®„ÄÇ',
                    vi: 'Toi dong y voi Dieu khoan dich vu va Chinh sach bao mat. Toi dong y uy quyen xu ly thu tuc xuat nhap canh va xac nhan thong tin ca nhan co the duoc cung cap cho Bo Tu phap.',
                    ja: 'Âà©Áî®Ë¶èÁ¥Ñ„Å®„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„Å´ÂêåÊÑè„Åó„Åæ„Åô„ÄÇÂá∫ÂÖ•ÂõΩÊ∞ë‰∫ãÂßî‰ªª„Å´ÂêåÊÑè„Åó„ÄÅÂÄã‰∫∫ÊÉÖÂ†±„ÅåÊ≥ïÂãôÈÉ®„Å´Êèê‰æõ„Åï„Çå„ÇãÂ†¥Âêà„Åå„ÅÇ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ',
                    mn: '“Æ–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –Ω”©—Ö—Ü”©–ª –±–æ–ª–æ–Ω –ù—É—É—Ü–ª–∞–ª—ã–Ω –±–æ–¥–ª–æ–≥—ã–≥ –∑”©–≤—à”©”©—Ä—á –±–∞–π–Ω–∞. –¶–∞–≥–∞–∞—á–ª–∞–ª—ã–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç–≥ –¥–∞–∞–ª–≥–∞—Ö—ã–≥ –∑”©–≤—à”©”©—Ä—á, —Ö—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –•—É—É–ª—å –∑“Ø–π–Ω —è–∞–º–∞–Ω–¥ ”©–≥—á –±–æ–ª–æ—Ö—ã–≥ –±–∞—Ç–∞–ª–∂ –±–∞–π–Ω–∞.',
                    th: '‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏°‡∏≠‡∏ö‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á'
                },
                selectResidenceProof: {
                    ko: 'Í±∞Ï£º Ï¶ùÎ™Ö Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî',
                    en: 'Please select your Proof of Residence type',
                    zh: 'ËØ∑ÈÄâÊã©ÊÇ®ÁöÑÂ±Ö‰ΩèËØÅÊòéÁ±ªÂûã',
                    vi: 'Vui long chon loai chung minh cu tru',
                    ja: 'Â±Ö‰ΩèË®ºÊòé„ÅÆÁ®ÆÈ°û„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    mn: '–û—Ä—à–∏–Ω —Å—É—É–≥–∞–∞ –±–∞—Ç–∞–ª–≥–∞–∞–Ω—ã —Ç”©—Ä–ª–∏–π–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É',
                    th: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏≥‡∏ô‡∏±‡∏Å'
                },
                fillInField: {
                    ko: 'Îã§Ïùå Ìï≠Î™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî: {field}',
                    en: 'Please fill in: {field}',
                    zh: 'ËØ∑Â°´ÂÜôÔºö{field}',
                    vi: 'Vui long dien: {field}',
                    ja: 'Ê¨°„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö{field}',
                    mn: '–ë”©–≥–ª”©–Ω”© “Ø“Ø: {field}',
                    th: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å: {field}'
                },
                openThread: {
                    ko: 'Ïì∞Î†àÎìú Ïó¥Í∏∞',
                    en: 'Open Thread',
                    zh: 'ÊâìÂºÄÁ∫øÁ®ã',
                    vi: 'Mo chuoi',
                    ja: '„Çπ„É¨„ÉÉ„Éâ„ÇíÈñã„Åè',
                    mn: '–ù—ç—ç—Ö',
                    th: '‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ò‡∏£‡∏î'
                },
                wiseTitle: {
                    ko: 'WISE Í≥ÑÏ¢å Ïù¥Ï≤¥',
                    en: 'Bank Transfer via WISE',
                    zh: 'WISEÈì∂Ë°åËΩ¨Ë¥¶',
                    vi: 'Chuy·ªÉn kho·∫£n qua WISE',
                    ja: 'WISEÈäÄË°åÊåØËæº',
                    mn: 'WISE –±–∞–Ω–∫ —à–∏–ª–∂“Ø“Ø–ª—ç–≥',
                    th: '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô WISE'
                },
                wiseServiceLabel: {
                    ko: 'ÏÑúÎπÑÏä§',
                    en: 'Service',
                    zh: 'ÊúçÂä°',
                    vi: 'D·ªãch v·ª•',
                    ja: '„Çµ„Éº„Éì„Çπ',
                    mn: '“Æ–π–ª—á–∏–ª–≥—ç—ç',
                    th: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£'
                },
                wiseOrderLabel: {
                    ko: 'Ï£ºÎ¨∏Î≤àÌò∏',
                    en: 'Order ID',
                    zh: 'ËÆ¢ÂçïÂè∑',
                    vi: 'M√£ ƒë∆°n h√†ng',
                    ja: 'Ê≥®ÊñáÁï™Âè∑',
                    mn: '–ó–∞—Ö–∏–∞–ª–≥—ã–Ω –¥—É–≥–∞–∞—Ä',
                    th: '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠'
                },
                wiseAmountLabel: {
                    ko: 'Í≤∞Ï†ú Í∏àÏï°',
                    en: 'Amount',
                    zh: 'ÊîØ‰ªòÈáëÈ¢ù',
                    vi: 'S·ªë ti·ªÅn',
                    ja: 'Ê±∫Ê∏àÈáëÈ°ç',
                    mn: '–¢”©–ª–±”©—Ä–∏–π–Ω –¥“Ø–Ω',
                    th: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'
                },
                wiseInstructions: {
                    ko: 'ÏïàÎÇ¥',
                    en: 'Instructions',
                    zh: 'ËØ¥Êòé',
                    vi: 'H∆∞·ªõng d·∫´n',
                    ja: '„ÅîÊ°àÂÜÖ',
                    mn: '–ó–∞–∞–≤–∞—Ä',
                    th: '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥'
                },
                wiseInstruction1: {
                    ko: 'ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ WISEÎ°ú Í≤∞Ï†úÌï¥ Ï£ºÏÑ∏Ïöî.',
                    en: 'Click the button below to pay via WISE.',
                    zh: 'ËØ∑ÁÇπÂáª‰∏ãÊñπÊåâÈíÆÈÄöËøáWISEÊîØ‰ªò„ÄÇ',
                    vi: 'Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ thanh to√°n qua WISE.',
                    ja: '‰∏ã„ÅÆ„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶WISE„ÅßÊ±∫Ê∏à„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    mn: '–î–æ–æ—Ä—Ö —Ç–æ–≤—á–∏–π–≥ –¥–∞—Ä–∂ WISE-—ç—ç—Ä —Ç”©–ª–Ω”© “Ø“Ø.',
                    th: '‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏ú‡πà‡∏≤‡∏ô WISE'
                },
                wiseInstruction2: {
                    ko: 'Í≤∞Ï†ú ÌõÑ Í¥ÄÎ¶¨ÏûêÍ∞Ä ÌôïÏù∏ÌïòÎ©¥ ÏÑúÎπÑÏä§Í∞Ä ÏãúÏûëÎê©ÎãàÎã§.',
                    en: 'Service will start after admin confirms payment.',
                    zh: 'ÁÆ°ÁêÜÂëòÁ°ÆËÆ§‰ªòÊ¨æÂêéÊúçÂä°Â∞ÜÂºÄÂßã„ÄÇ',
                    vi: 'D·ªãch v·ª• s·∫Ω b·∫Øt ƒë·∫ßu sau khi qu·∫£n tr·ªã vi√™n x√°c nh·∫≠n thanh to√°n.',
                    ja: 'ÁÆ°ÁêÜËÄÖ„ÅåÂÖ•ÈáëÁ¢∫Ë™çÂæå„ÄÅ„Çµ„Éº„Éì„Çπ„ÅåÈñãÂßã„Åï„Çå„Åæ„Åô„ÄÇ',
                    mn: '–ê–¥–º–∏–Ω —Ç”©–ª–±”©—Ä–∏–π–≥ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª—Å–Ω—ã –¥–∞—Ä–∞–∞ “Ø–π–ª—á–∏–ª–≥—ç—ç —ç—Ö—ç–ª–Ω—ç.',
                    th: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô'
                },
                wisePayBtn: {
                    ko: 'WISEÎ°ú Í≤∞Ï†úÌïòÍ∏∞',
                    en: 'Pay with WISE',
                    zh: '‰ΩøÁî®WISEÊîØ‰ªò',
                    vi: 'Thanh to√°n qua WISE',
                    ja: 'WISE„ÅßÊîØÊâï„ÅÜ',
                    mn: 'WISE-—ç—ç—Ä —Ç”©–ª”©—Ö',
                    th: '‡∏ä‡∏≥‡∏£‡∏∞‡∏ú‡πà‡∏≤‡∏ô WISE'
                },
                wiseClose: {
                    ko: 'Îã´Í∏∞',
                    en: 'Close',
                    zh: 'ÂÖ≥Èó≠',
                    vi: 'ƒê√≥ng',
                    ja: 'Èñâ„Åò„Çã',
                    mn: '–•–∞–∞—Ö',
                    th: '‡∏õ‡∏¥‡∏î'
                },
                wiseLinkNotFound: {
                    ko: 'WISE Í≤∞Ï†ú ÎßÅÌÅ¨Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',
                    en: 'WISE payment link not found. Please contact admin.',
                    zh: 'Êú™ÊâæÂà∞WISEÊîØ‰ªòÈìæÊé•„ÄÇËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëò„ÄÇ',
                    vi: 'Kh√¥ng t√¨m th·∫•y li√™n k·∫øt WISE. Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n.',
                    ja: 'WISEÊ±∫Ê∏à„É™„É≥„ÇØ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇÁÆ°ÁêÜËÄÖ„Å´„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    mn: 'WISE —Ç”©–ª–±”©—Ä–∏–π–Ω –ª–∏–Ω–∫ –æ–ª–¥—Å–æ–Ω–≥“Ø–π. –ê–¥–º–∏–Ω—Ç–∞–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω–æ —É—É.',
                    th: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå WISE ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•'
                },
                wiseConfirmMsg: {
                    ko: 'Í∞êÏÇ¨Ìï©ÎãàÎã§! 1-2 ÏòÅÏóÖÏùº Ïù¥ÎÇ¥Ïóê Í≤∞Ï†úÎ•º ÌôïÏù∏ÌïòÍ≤†ÏäµÎãàÎã§.',
                    en: 'Thank you! We\'ll confirm your payment within 1-2 business days.',
                    zh: 'Ë∞¢Ë∞¢ÔºÅÊàë‰ª¨Â∞ÜÂú®1-2‰∏™Â∑•‰ΩúÊó•ÂÜÖÁ°ÆËÆ§ÊÇ®ÁöÑ‰ªòÊ¨æ„ÄÇ',
                    vi: 'C·∫£m ∆°n! Ch√∫ng t√¥i s·∫Ω x√°c nh·∫≠n thanh to√°n trong 1-2 ng√†y l√†m vi·ªác.',
                    ja: '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ1-2Âñ∂Ê•≠Êó•‰ª•ÂÜÖ„Å´„ÅäÊîØÊâï„ÅÑ„ÇíÁ¢∫Ë™ç„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                    mn: '–ë–∞—è—Ä–ª–∞–ª–∞–∞! 1-2 –∞–∂–ª—ã–Ω ”©–¥—Ä–∏–π–Ω –¥–æ—Ç–æ—Ä —Ç”©–ª–±”©—Ä–∏–π–≥ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–Ω–∞.',
                    th: '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1-2 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£'
                }
            };

            let msg = messages[key];
            if (!msg) return key;

            let text = msg[lang] || msg.en;

            // Replace parameters like {amount}
            Object.keys(params).forEach(param => {
                text = text.replace(`{${param}}`, params[param]);
            });

            return text;
        }

        // WISE Modal Functions
        let wiseOrderInfo = null;

        function showWiseModal(orderInfo) {
            wiseOrderInfo = orderInfo;
            // Translate modal labels
            document.getElementById('wiseModalTitle').textContent = getUIMessage('wiseTitle');
            document.getElementById('wiseServiceLabel').textContent = getUIMessage('wiseServiceLabel');
            document.getElementById('wiseOrderLabel').textContent = getUIMessage('wiseOrderLabel');
            document.getElementById('wiseAmountLabel').textContent = getUIMessage('wiseAmountLabel');
            document.getElementById('wiseNotice').innerHTML = '<strong>' + getUIMessage('wiseInstructions') + ':</strong><p>' + getUIMessage('wiseInstruction1') + '</p><p style="margin-top: 8px;">' + getUIMessage('wiseInstruction2') + '</p>';
            document.getElementById('wisePayBtn').textContent = getUIMessage('wisePayBtn');
            document.getElementById('wiseCloseBtn').textContent = getUIMessage('wiseClose');
            // Set order info
            document.getElementById('wiseServiceName').textContent = orderInfo.orderName;
            document.getElementById('wiseOrderId').textContent = 'WISE-' + orderInfo.orderId;
            document.getElementById('wiseAmount').textContent = '‚Ç©' + orderInfo.amount.toLocaleString();
            document.getElementById('wiseModalOverlay').classList.add('active');
        }

        function closeWiseModal(event) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById('wiseModalOverlay').classList.remove('active');
            wiseOrderInfo = null;
        }

        async function processWiseModalPayment() {
            if (!wiseOrderInfo) return;

            const btn = document.getElementById('wisePayBtn');
            btn.disabled = true;
            btn.classList.add('loading');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ' + getUIMessage('processing');

            try {
                const session = await checkSession();
                if (!session || !session.user) {
                    alert(getUIMessage('loginRequired'));
                    window.location.href = 'index.html';
                    return;
                }

                // Get D-10-1 form data if applicable
                const d10Data = getD10FormData();

                // Get pending payment info from session storage
                const pendingPayment = sessionStorage.getItem('pendingPayment');
                let paymentInfo = pendingPayment ? JSON.parse(pendingPayment) : {};

                // Create thread for Wise payment (pending confirmation)
                const threadResult = await createThread({
                    service_name: wiseOrderInfo.orderName,
                    status: 'payment',
                    amount: wiseOrderInfo.amount,
                    government_fee: wiseOrderInfo.govtFee || 0,
                    order_id: 'WISE-' + wiseOrderInfo.orderId,
                    organization: paymentInfo.organization || 'general',
                    payment_id: 'WISE-' + wiseOrderInfo.orderId
                });

                if (!threadResult.success) {
                    throw new Error('Thread creation failed');
                }

                const threadId = threadResult.data.id;

                // Send welcome message with Wise payment info
                const welcomeMessage = `üìã **Payment Pending - Wise Transfer**

Your order has been received. We're waiting for your Wise transfer to be confirmed.

**Order ID:** WISE-${wiseOrderInfo.orderId}
**Amount:** ‚Ç©${wiseOrderInfo.amount.toLocaleString()}
**Payment Method:** Wise International Transfer

‚è≥ Payment confirmation typically takes 1-2 business days.

Once confirmed, our specialist will contact you to proceed with your application.

Please submit your basic information:
${window.location.origin}/profile-submit.html?thread=${threadId}`;

                await supabaseClient
                    .from('messages')
                    .insert({
                        thread_id: threadId,
                        sender_id: null,
                        sender_type: 'admin',
                        sender_name: 'Lawyeon Visa Center',
                        content: welcomeMessage
                    });

                // Send D-10-1 form data if applicable
                if (d10Data && paymentInfo.d10FormattedMessage) {
                    await supabaseClient
                        .from('messages')
                        .insert({
                            thread_id: threadId,
                            sender_id: session.user.id,
                            sender_type: 'customer',
                            sender_name: wiseOrderInfo.customerName || 'Customer',
                            content: paymentInfo.d10FormattedMessage
                        });
                }

                // Clear pending payment
                sessionStorage.removeItem('pendingPayment');

                // Close modal and redirect to thread
                closeWiseModal();
                alert(getUIMessage('wiseConfirmMsg'));
                window.location.href = `thread-general-v2.html?id=${threadId}`;

            } catch (error) {
                console.error('Error:', error);
                btn.disabled = false;
                btn.classList.remove('loading');
                btn.innerHTML = getUIMessage('wisePayBtn');
                alert(getUIMessage('errorOccurred'));
            }
        }

        async function applyForDeferredPayment() {
            // Validate consent
            if (!checkServiceConsent()) return;

            const btn = document.getElementById('payBtn');
            btn.disabled = true;
            btn.classList.add('loading');
            btn.innerHTML = '<i class="fas fa-spinner"></i> ' + getUIMessage('openingThread');

            try {
                const session = await checkSession();
                if (!session || !session.user) {
                    alert(getUIMessage('loginRequired'));
                    window.location.href = 'index.html';
                    return;
                }

                // Check if we have an existing thread from URL
                const urlParams = new URLSearchParams(window.location.search);
                const existingThreadId = urlParams.get('thread');
                const organization = urlParams.get('org') || 'general';

                let threadId;

                if (existingThreadId) {
                    // Use existing thread
                    threadId = existingThreadId;
                    // console.log('Using existing thread:', threadId);
                } else {
                    // Create new thread
                    const threadResult = await createThread({
                        service_name: selectedService.name,
                        status: 'received',
                        amount: selectedService.totalPrice,
                        order_id: 'DEFERRED-' + Date.now(),
                        organization: organization
                    });

                    if (!threadResult.success) {
                        throw new Error('Thread creation failed');
                    }
                    threadId = threadResult.data.id;
                }

                // Get D-10-1 form data if available
                const d10FormData = getD10FormData();
                const d10FormattedMessage = d10FormData ? formatD10DataForMessage(d10FormData) : null;

                // Send D-10-1 form data as user message if available
                if (d10FormattedMessage) {
                    const profile = await getUserProfile(session.user.id);
                    try {
                        const { error: d10Error } = await supabaseClient
                            .from('messages')
                            .insert({
                                thread_id: threadId,
                                sender_id: session.user.id,
                                sender_type: 'user',
                                sender_name: profile?.data?.name || session.user.email?.split('@')[0] || 'Applicant',
                                content: d10FormattedMessage,
                                created_at: new Date().toISOString()
                            });

                        if (d10Error) {
                            console.error('D-10-1 form message failed:', d10Error);
                        } else {
                            // console.log('‚úÖ D-10-1 form data sent to thread');
                        }
                    } catch (d10Err) {
                        console.error('D-10-1 form message error:', d10Err);
                    }
                }

                // Only send welcome message if creating new thread (not for existing thread)
                if (!existingThreadId) {
                    // Get lecture code if DHU service
                    const lectureCode = urlParams.get('lectureCode') || sessionStorage.getItem('dhu_lecture_code') || '';

                    let welcomeMessage;
                    if (organization === 'dhu' && lectureCode) {
                        welcomeMessage = `üìã **D-10-1 Visa Application Started**

**University:** Daegu Haany University
**Lecture Code:** ${lectureCode}

Please submit your basic information to proceed:
${window.location.origin}/profile-submit.html?thread=${threadId}

Our specialist will contact you within 30 minutes after you submit your information.`;
                    } else {
                        welcomeMessage = `üìã Please submit your basic information.\n\n${window.location.origin}/profile-submit.html?thread=${threadId}`;
                    }

                    const senderName = getSenderName();

                    try {
                        const { error: msgError } = await supabaseClient
                            .from('messages')
                            .insert({
                                thread_id: threadId,
                                sender_id: null,
                                sender_type: 'admin',
                                sender_name: senderName,
                                content: welcomeMessage
                            });

                        if (msgError) {
                            console.error('Welcome message failed:', msgError);
                        }
                    } catch (msgErr) {
                        console.error('Welcome message error:', msgErr);
                    }

                    if (selectedService.totalPrice > 0) {
                        alert(getUIMessage('threadCreated', { amount: selectedService.totalPrice.toLocaleString() }));
                    } else {
                        alert(getUIMessage('threadCreatedConsultFirst'));
                    }
                }

                window.location.href = `thread-general-v2.html?id=${threadId}`;
            } catch (error) {
                console.error('Thread creation error:', error);
                btn.disabled = false;
                btn.classList.remove('loading');
                btn.innerHTML = '<i class="fas fa-comments"></i> ' + getUIMessage('openThread');
                alert(getUIMessage('errorOccurred'));
            }
        }

        async function applyForConsulting() {
            // Validate consent
            if (!checkServiceConsent()) return;

            const btn = document.getElementById('payBtn');
            btn.disabled = true;
            btn.classList.add('loading');
            btn.innerHTML = '<i class="fas fa-spinner"></i> ' + getUIMessage('submitting');

            try {
                const session = await checkSession();
                if (!session || !session.user) {
                    alert(getUIMessage('loginRequired'));
                    window.location.href = 'index.html';
                    return;
                }

                const threadResult = await createThread({
                    service_name: selectedService.name + ' (Quote Request)',
                    status: 'document',
                    amount: 0,
                    order_id: 'CONSULT-' + Date.now(),
                    is_consulting: true,
                    organization: 'general'
                });

                if (!threadResult.success) {
                    throw new Error('Thread creation failed');
                }

                alert(getUIMessage('quoteSubmitted'));
                window.location.href = `thread-general-v2.html?id=${threadResult.data.id}`;
            } catch (error) {
                console.error('Consultation request error:', error);
                btn.disabled = false;
                btn.classList.remove('loading');
                btn.innerHTML = '<i class="fas fa-paper-plane"></i> ' + getUIMessage('openThread');
                alert(getUIMessage('errorOccurred'));
            }
        }
    </script>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js?v=20250119"></script>

    <!-- i18n Îã§Íµ≠Ïñ¥ ÏßÄÏõê -->
    <script src="js/translations.js?v=20260205"></script>
    <script src="js/i18n.js?v=20260205"></script>
</body>
</html>
